<script>
    var bolPaypalBRaintreeLoaded = false;
    var BreadScriptLoaded = false;
    function addJavascript(jsname, dataapikey) {
	    var th = document.getElementsByTagName('head')[0];
	    var s = document.createElement('script');
	    s.setAttribute('type','text/javascript');
	    s.setAttribute('src',jsname);
	    if (dataapikey != 'data-api-key')
	        s.setAttribute('data-api-key', dataapikey);
	    th.appendChild(s);
    }
</script>
<section id="checkoutStep3" class="checkoutStep3-page-content page-content">
    <div class="container">
        <div class="row">
            <div class="content-area col-lg-12 clearfix">
                <form name="billing" id="billing" method="post" action="checkout4.asp?step=4">
                    <input type="hidden" name="tknio" value="[tknio]">

                    <div id="ab-content" class="row ab-content">
                        <div class="col-md-7 col-xs-12">
                            <div class="logo">
								<a href="/view_cart.asp"><img src="assets/images/E-Rigging_Logo.png"></a> 
                                <!--START: global_header-->
                                <h3 class="store-name">[storename]</h3>
                                <h4 class="store-slogan">[storeslogan]</h4>
                                <!--END: global_header-->
                            </div>
                        </div>

                        <!--START: CATEGORY_HEADER-->
                        <div class="category-header col-md-7 col-xs-12">
                            <div id="checkoutStep3Header">[CONTENT]</div>
                        </div>
                        <!--END: CATEGORY_HEADER-->

                        <div id="checkout-right" class="col-md-5 col-xs-12 bg-alternative showcart-md col-height pull-right rightCol">
                            <section class="row-full cart-toggle bg-alternative hidden-md hidden-lg">
                                <div class="container">
                                    <div class="row">
                                        <div class="col-xs-12 text-right"><span class="pull-left"><h4 class="module-expand expanded" data-toggle="collapse" data-target="#chkShoppingCartCollapse"><i class="icon-basket"></i></h4></span> <h5 class="text-success cart-total cart-balance-item">--.--</h5></div>
                                    </div>
                                </div>
                            </section>

                            <div class="row hidden-xs order-summary-header">
                                <div class="col-xs-6">
                                    <h3>Order Summary</h3>
                                </div>
                                <div class="col-xs-6 text-right">
                                    <a href="/view_cart.asp">Edit Cart</a>
                                </div>
                            </div>

                            <div id="chkShoppingCartCollapse" class="collapse in">
                                <div id="chkShoppingCart" class="chkShoppingCart scrollbox scrollbox_delayed">
                                    <div class="scrollbox-content">
                                        <!--START: SHOPPING_CART_ITEM-->
                                        <div class="row cart-items">
                                            <div class="main">
                                                <div class="col-sm-2 col-xs-3 vcenter">
                                                    <div class="product-image">
                                                        <!--START: itemthumbnail--><a href="product.asp?itemid=[ITEM_CATALOGID]"><img src="[THUMBNAIL]" id="tl_[ITEM_CATALOGID]" alt="[ITEM_NAME]" /></a><!--END: itemthumbnail-->
                                                        <!--START: thumbnailnolink--><img src="[THUMBNAIL]" id="tnl" /><!--END: thumbnailnolink-->
                                                        <span>[ITEM_QUANTITY]</span>
                                                    </div>
                                                </div>
                                                <div class="col-sm-8 col-xs-6 vcenter">
                                                    <div class="product-name">
                                                        <!--START: itemnamelink--><span><a href="product.asp?itemid=[ITEM_CATALOGID]">[ITEM_NAME]</a></span><!--END: itemnamelink-->
                                                        <!--START: itemnamenolink--><span id="spnItemName">[ITEM_NAME]</span><!--END: itemnamenolink-->
                                                        <div class="base-price">[ITEM_PRICE]</div>
                                                    </div>
                                                </div>
                                                <div class="col-sm-2 col-xs-3 vcenter">
                                                    <div class="product-info text-right">[ITEM_SUBTOTAL]</div>
                                                </div>
                                                <div class="clearfix"></div>
                                            </div>
                                        </div>
                                        <!--END: SHOPPING_CART_ITEM-->
                                    </div>
                                </div>

                                <div id="total_div">
                                    <div class="row cart-tally">
                                        <!--START: apply_coupon-->
                                        <div id="divApplyCoupon" class="applyCoupon clearfix">
                                            <div class="coupon-header header col-sm-12">
                                                <h3 class="page_heading">[viewcart_coupon-header]</h3>
                                                <div class="clearfix"></div>
                                            </div>

                                            <div class="coupon-field clearfix">
                                                <div class="col-sm-9">
                                                    <input type="text" name="coupon_code2" maxlength="50" id="coupon_code2" placeholder="[viewcart_coupon-message]" class="txtBoxStyle form-control" size="14" aria-label="Coupon" />
                                                </div>
                                                <div class="col-sm-3 coupon-apply">
                                                    <button type="button" onclick="ApplyCoupon()" class="btn btn-default form-control">Apply</button>
                                                </div>
                                            </div>
                                        </div>
                                        <!--END: apply_coupon-->

                                        <div class="clearfix total_div">
                                            <div class="total_items col-xs-6">[shoppingcart_subtotal]</div>
                                            <div class="total_subtotal col-xs-6 text-right">[SUBTOTAL]</div>
                                        </div>

                                        <!--START: DISCOUNTS-->
                                        <div class="clearfix total_div">
                                            <div class="total_discount-detail col-xs-6">[checkout1_discounts]</div>
                                            <div class="total_discount col-xs-6 text-right">- [DISCOUNT]</div>
                                        </div>
                                        <!--END: DISCOUNTS-->

                                        <!--START: BUYSAFE-->
                                        <div class="clearfix total_div">
                                            <div class="total_buysafe-logo col-xs-6"><img src="assets/templates/common/images/buysafe.gif" alt="" /></div>
                                            <div class="total_buysafe col-xs-6 text-right">[buysafe_totalbondcost]</div>
                                        </div>
                                        <!--END: BUYSAFE-->

                                        <div class="clearfix total_div">
                                            <div class="total_cart-shipping col-xs-6">[shoppingcart_shipping]</div>
                                            <div class="total_shipping col-xs-6 text-right">[SHIPPING]</div>
                                        </div>

                                        <div class="clearfix total_div">
                                            <div class="total_cart-taxes col-xs-6">[shoppingcart_taxes]</div>
                                            <div class="total_taxes col-xs-6 text-right">[TAX]</div>
                                        </div>
                                    </div>

                                    <div class="row cart-grandtotal">

                                        <!--START: real_total-->
                                        <div class="clearfix total_div [due_amount_class]">
                                            <div class="total_cart-total col-xs-6">[shoppingcart_total]</div>
                                            <div class="total_total col-xs-6 text-right total_due_amount">[TOTAL]</div>
                                        </div>
                                        <!--END: real_total-->

                                        <!--START: GIFTCERTS-->
                                        <div class="clearfix total_div">
                                            <div class="total_cart-giftcerts col-sm-8 col-xs-6">
                                                [shoppingcart_giftcertificate]: <a href="javascript:showGiftCertDetails();">(details)</a>
                                            </div>
                                            <div class="total_giftcerts col-sm-4 col-xs-6 text-right">- [GIFTCERTS]</div>
                                        </div>

                                        <!--START: GIFTCERTIFICATES-->
                                        <div id="divGiftCertDetails" name="divGiftCertDetails" style="display:none;">
                                            <!--START: DISPLAY_GIFTCERTIFICATES-->
                                            <div class="clearfix">
                                                <div class="giftcerts-name col-xs-6">Gift Code</div>
                                                <div class="giftcerts-name col-xs-6 text-right">[certificate_name]</div>
                                            </div>

                                            <div class="clearfix">
                                                <div class="giftcerts-amount col-xs-6">Amount</div>
                                                <div class="giftcerts-amount col-xs-6 text-right">[discount_amount]</div>
                                            </div>

                                            <input type="hidden" name="coupon" value="[id]" />
                                            <!--END: DISPLAY_GIFTCERTIFICATES-->
                                        </div>
                                        <!--END: GIFTCERTIFICATES-->
                                        <!--END: GIFTCERTS-->


                                        <!--START: STORECREDIT-->
                                        <div class="clearfix total_div">
                                            <div class="total_cart-total col-xs-6">[shoppingcart_storecredit-title] <strong>([CREDITBALANCE])</strong></div>
                                            <div class="total_total col-xs-6 text-right">- [STORECREDITS]</div>
                                        </div>
                                        <!--END: STORECREDIT-->

                                        <!--START: real_balance-->
                                        <div class="remaining-balance clearfix total_div">
                                            <div class="total_cart-balance col-sm-8 col-xs-6">[shoppingcart_balance]</div>
                                            <div id="divBalance" class="col-sm-4 col-xs-6 cart_total cart_text total_due_amount price text-right">[BALANCE]</div>
                                        </div>
                                        <!--END: real_balance-->
                                    </div>
									<div class="trust-embeds">
										  <div> 
											<!-- BBB Tag --> 
										  <a href="https://www.bbb.org/us/la/new-orleans/profile/riggers-equipment-and-supplies/e-rigging-com-0985-90004297/#sealclick" target="_blank" rel="nofollow"><img src="https://seal-neworleans.bbb.org/seals/blue-seal-200-42-bbb-90004297.png" style="border: 0;" alt="E-Rigging.com BBB Business Review" /></a>
											<!-- End BBB Tag --> 
										  </div>
										  <div> 
											<!-- GeoTrust QuickSSL [tm] Smart  Icon tag. Do not edit. --> 
											<script language="javascript" type="text/javascript" src="//smarticon.geotrust.com/si.js"></script> 
											<!-- end  GeoTrust Smart Icon tag --> 
										  </div>
										  <div> 
											<!-- Start Trust Wave Icon --> 
											<script type="text/javascript" src="https://sealserver.trustwave.com/seal.js?style=invert&code=0547213628694d77bfd863f847265623"></script> 
											<!-- EndTrust Wave Icon --> 
										  </div>
										  <div> 
											<!--Start Authorize.net--> 
											<!-- (c) 2005, 2016. Authorize.Net is a registered trademark of CyberSource Corporation -->
											<div class="AuthorizeNetSeal" style="margin-left:auto; margin-right:auto"> <script type="text/javascript" language="javascript">var ANS_customer_id="02d21d2d-715e-4e1b-a65a-01e8f08c4494";</script> <script type="text/javascript" language="javascript" src="//verify.authorize.net/anetseal/seal.js"></script> <a href="http://www.authorize.net/" id="AuthorizeNetText" target="_blank">Payment Gateway</a> </div>
											<!-- End Authorize.net--> 
										  </div>
										</div>

									
									
                                </div>
                            </div>
                        </div>

                        <div class="col-md-7 col-xs-12 col-height leftCol">
                            <div id="divPayment" class="module-section">
                                <!--START: PAYMENT_BLOCK-->
                                <div class="header">
                                    <h3 class="page_heading">[checkout3_methodofpaymentselect]</h3>
                                    <div class="clearfix"></div>
                                </div>
                                <div id="divPaymentMethods">
                                   
                                    <!--START: checkoutByAmazon-->
                                    <div class="checkoutByAmazon clearfix dpm-provider wallet-method">
                                        <h4>[payment_description]</h4>
                                        <div id="divPaymentOption[id]" name="divPaymentOption">
                                            <div class="payment-method">[amazon_cba_form]</div>
                                        </div>
                                    </div>
                                    <!--END: checkoutByAmazon-->
                                    <!--START: checkoutMasterPass-->
                                    <div class="checkoutMasterPass clearfix dpm-provider wallet-method">
                                        <h4>MasterPass&trade;</h4>
                                        <div id="divPaymentOption[id]" name="divPaymentOption">
                                            <a href="masterpass.asp?ac=token" title="Checkout with MasterPass&trade;"><img id="imgMasterPass" src="assets/templates/common/images/mcpp_wllt_btn_chk_147x034px.png" alt="Checkout with MasterPass&trade;" /></a><br />
                                            <a href="javascript:void(0);" title="Learn more about MasterPass&trade;" onclick="window.open('http://www.mastercard.com/mc_us/wallet/learnmore/en/','','scrollbars=no,width=700,height=700'); return false;"><i class="icon-info-circled"></i>Learn more</a>
                                        </div>
                                    </div>
                                    <!--END: checkoutMasterPass-->
                                    <!--START: checkout_visacheckout-->
                                    <!--START: visacheckout_jscript-->
                                    <style id="antiClickjack">
                                        body {
                                            display: none;
                                        }
                                    </style>
                                    <script type="text/javascript">
		                                if (self === top) {
		                                    var antiClickjack = document.getElementById("antiClickjack");
		                                    if (antiClickjack)
		                                        antiClickjack.parentNode.removeChild(antiClickjack);
		                                } else {
		                                    top.location = self.location;
		                                }
                                    </script>
                                    <script type="text/javascript">
			                            function onVmeReady() {
				                            //alert(apiKey);
				                            var apiKey = '[visacheckout_api_key]';
				                            var dataq = '';

				                            V.init({
					                            apikey: apiKey,
					                            externalClientId: '[visacheckout_externalclientid]',
					                            sourceId: "",
					                            settings: {
						                            locale: "[visacheckout_locale]",
						                            countryCode: "[visacheckout_country]",
						                            displayName: "[storename]",
						                            logoUrl: "[visacheckout_logourl]",
						                            websiteUrl: "[visacheckout_domainname]",
						                            shipping: {
							                            acceptedRegions: [[visacheckout_shippingcountries]],
							                            collectShipping: "[visacheckout_collectshipping]"
						                            },
						                            payment: {
							                            cardBrands: [[cardsaccepted]],
							                            acceptCanadianVisaDebit: "[visacheckout_acceptcanadadebitcard]"
						                            },
						                            review: {
							                            buttonAction: "Continue"
						                            },
						                            dataLevel: "FULL"
					                            },
					                            paymentRequest: {
						                            merchantRequestId: "[visacheckout_orderid]",
						                            currencyCode: "[currency_code]",
						                            subtotal: "[visacheckout_amount]",
						                            total: "[visacheckout_amount]"
					                            }
				                            }
				                            );

				                            V.on("payment.success", function (payment) {

					                            dataq = JSON.stringify(payment);

					                            jQuery.ajax({
						                            url: 'visacheckout.asp',
						                            data: 'jdata=' + dataq + '&ac=unpackdata',
						                            dataType: 'json',
						                            type: 'post',
						                            cache: false,
						                            error: reportRuleError
					                            })
					                            .done(function (response) {
						                            if (response.k == null)
							                            alert('No response from VISA Checkout.  Try again or use another payment method.');
						                            else {
							                            window.location = 'checkout_one.asp?k=' + response.k + '&wid=' + response.wid;
						                            }
					                            })
						                            .fail(function (strResult) {
							                            alert('VISA Checkout Process call failed');
						                            });

				                            });

				                            V.on("payment.cancel", function (payment) {
					                            alert("VISA Checkout Payment method selection canceled.");
				                            });

				                            V.on("payment.error", function (payment, error) {
					                            alert("Problem encountered with VISA Checkout service");
				                            });

			                            }

			                            function reportRuleError(jqXHR, textStatus) {
				                            if (jqXHR.status > 0) {
					                            alert("Error processing VISA Checkout request ");
				                            }
			                            }
                                    </script>
                                    <!--END: visacheckout_jscript-->
                                    <div class="checkout_visacheckout dpm-provider wallet-method">
                                        <h4>Checkout with Visa Checkout</h4>
                                        <div id="divPaymentOption[id]" name="divPaymentOption">
                                            <img alt="Visa Checkout" class="v-button" role="button" src="[visacheckout_button]" />
                                            <script type="text/javascript" src="[visacheckout_jscriptsdk]"></script>
                                            <div class="clearfix"></div>
                                        </div>
                                    </div>

                                    <!--END: checkout_visacheckout-->
                                    <!--START: PayWithAmazon-->
                                    <div class="dpm-provider PayWithAmazon wallet-method">
                                        <h4>Pay With Amazon</h4>
                                        <div id="divPaymentOption[id]" name="divPaymentOption">
                                            <script type='text/javascript'>
                                                window.onAmazonLoginReady = function () {
                                                    amazon.Login.setClientId('[amazonpay_clientid]');
                                                };
                                            </script>
                                            <script type='text/javascript' src='https://static-na.payments-amazon.com/OffAmazonPayments/us/[amazonpay_sandbox]js/Widgets.js'></script>

                                            <!-- Place this where you would like the Payment Button to appear -->
                                            <div id="AmazonPayButton"></div>
                                            <script type="text/javascript">
                                                var authRequest;
                                                var amazonOrderReferenceId;
                                                OffAmazonPayments.Button("AmazonPayButton", "[amazonpay_sellerid]", {
                                                    type: "PwA",
                                                    color: "Gold",
                                                    size: "small",
                                                    authorization: function () {
                                                        var loginOptions = { scope: 'profile payments:widget payments:shipping_address', popup: true };
                                                        authRequest = amazon.Login.authorize(loginOptions, "[amazonpay_domain]/checkout_one.asp?wid=3");
                                                    },
                                                    onError: function (error) {
                                                        alert(error.getErrorMessage());
                                                        console.log(error);
                                                    }
                                                });
                                            </script>
                                        </div>
                                    </div>
                                    <!--END: PayWithAmazon-->
                                    <!--START: VME_SELECTED-->
                                    <div class="dpm-provider vmeSelected wallet-method">
                                        <h4>V.me by Visa</h4>
                                        <div id="divPaymentOption[id]" name="divPaymentOption">
                                            <input type="hidden" name="payment" value="online-[id]" checked />
                                            <img src="assets/templates/common/images/vme_accpt_mark.png" alt="V.me by Visa" />
                                        </div>
                                    </div>
                                    <!--END: VME_SELECTED-->

                                     <!--START: Google_Pay-->
                                    <div class="checkoutByGooglePay clearfix dpm-provider wallet-method">
                                        <h4>Google Pay</h4>
                                        <div class="wallet-option">
                                            <div class="payment-method">[GooglePay]</div>
                                        </div>
                                    </div>
                                    <!--END: Google_Pay-->
									
                                    <!--START: Amazon_Pay-->
                                    <div class="checkoutByAmazon clearfix dpm-provider wallet-method">
                                        <h4>Amazon Pay</h4>
										<div class="wallet-option">											
											<div id="AmazonPayButton2" class="amazon_pay_button"></div>											
                                        </div>
                                    </div>
                                    <!--END: Amazon_Pay-->     

									<!--START: stripe_applepay_button-->									
									<div id="checkoutByApplePay" class="checkoutByApplePay clearfix dpm-provider wallet-method">
                                        <h4>Apple Pay</h4>
										<div class="wallet-option">
											 <div class="stripe_applepay">
												[stripeApplePay]
											</div>
                                        </div>
                                    </div>                                   
                                    <!--END: stripe_applepay_button-->		                             


                                    <!--START: PPEXPRESS-->
                                    <div class="dpm-provider ppExpress wallet-method">
                                        <h4>
                                            <label for="online-[id]-ppe">
                                                [payment_description]
                                            </label>
                                        </h4>
                                        [PPEXPRESS_SCRIPTS_BLOCK]
                                        <div name="divPaymentOption[id]" class="wallet-option">
                                            <p>[payment_description_message]</p>
                                            <div id="paypal-button"></div>
                                        </div>
                                    </div>
                                    <!--END: PPEXPRESS-->
                                    <!--START: PPCREDIT-->
                                    <div class="ppExpress dpm-provider">
                                        <h4>
                                            <label for="online-[id]-ppc">
                                                <span class="ppe-radio">
                                                    <input name="payment" id="online-[id]-ppc" onclick="javascript: checkoutSwitch(true); window.location.href = 'paypal_express.asp?ch=0&ppc=1';" type="radio" value="online-[id]" />
                                                </span>
                                                [payment_description]
                                            </label>
                                        </h4>
                                        <div class="clear"></div>
                                        <div id="divPaymentOption[id]" name="divPaymentOption">
                                            <div class="ppe-logo" style="width:150px;">
                                                <a href="javascript:document.getElementById('online-[id]-ppc').click();"><img src="https://www.paypalobjects.com/webstatic/en_US/i/buttons/ppcredit-logo-medium.png" alt="PayPal Credit" height="35" /></a>
                                                <a href="https://www.securecheckout.billmelater.com/paycapture-content/fetch?hash=AU826TU8&content=/bmlweb/ppwpsiw.html" alt="PayPal Credit" target="_blank"><img src="https://www.paypalobjects.com/webstatic/en_US/btn/btn_bml_text.png" /></a>
                                            </div>
                                        </div>
                                    </div>
                                    <!--END: PPCREDIT-->
                                    <!--START: PAYPALADV-->
                                    <div class="ppAdv dpm-provider">
                                        <h4>
                                            <label for="online-[id]">
                                                <input type="hidden" id="hdnPayPalAdvID" name="hdnPayPalAdvID" value="online-[id]" />
                                                <input onclick="javascript: checkoutSwitch(true); doCheckout(document.billing);" id="online-[id]" name="payment" type="radio" value="online-[id]" />
                                                [payment_description]
                                            </label>
                                        </h4>
                                        <div id="divPaymentOption[id]" name="divPaymentOption" style="display:none;">
                                            <div id="divPayPalAdv" style="display:none;">
                                                <div style="text-align:left;">
                                                    <iframe id="iframePayPalAdv" name="iframePayPalAdv" src="assets/images/spacer.gif" width="490" height="565" frameborder="0" scrolling="no"></iframe>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                    <!--END: PAYPALADV-->
                                    <!--START: PAYFORT-->
                                    <div class="payfort ccGateway clearfix dpm-provider">
                                        <h4>
                                            <label for="online-[id]">
                                                <input id="online-[id]" name="payment" type="radio" value="online-[id]" onclick="javascript: checkoutSwitch(false); " />
                                                [payment_description]
                                                <input type="hidden" id="hdnPayFortID" name="hdnPayFortID" value="online-[id]" />
                                                <input type="hidden" id="hdnPayFortTokenID" name="hdnPayFortTokenID" />
                                                <input type="hidden" id="hdnPayFortExpMonth" name="hdnPayFortExpMonth" />
                                                <input type="hidden" id="hdnPayFortExpYear" name="hdnPayFortExpYear" />
                                                <input type="hidden" id="hdnPayFortLast4" name="hdnPayFortLast4" />
                                            </label>
                                        </h4>

                                        <div id="divPaymentOption[id]" name="divPaymentOption" style="display:none;">
                                            <div class="row cc-details">
                                                <div id="divPayFort" class="col-sm-12"></div>
                                                <div class="col-sm-12" id="PayFortSaveMyCC">
                                                    <input type="checkbox" id="ff[id]_savecc" name="ff[id]_savecc" value="1" />
                                                    <label for="ff[id]_savecc">[checkout3_savecc]</label>
                                                    <input type="hidden" name="ff[id]_saveccenabled" value="1" />
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <script src="https://beautiful.start.payfort.com/checkout.js"></script>
                                    <script type="text/javascript">
											// Initialize Start on page load
											StartCheckout.config({
												key: "[payfort_open_key]",
												complete: function (params) {
													jQuery("#hdnPayFortTokenID").val(params.token.id);
													jQuery("#hdnPayFortExpMonth").val(params.token.card.exp_month);
													jQuery("#hdnPayFortExpYear").val(params.token.card.exp_year);
													jQuery("#hdnPayFortLast4").val(params.token.card.last4);
													//submitFormWithToken(params);
													doCheckout(document.billing);
												}
											});

										function doPayFortClientToken() {
											StartCheckout.open({
												amount: [payfort_order_total],
												currency: "[payfort_currency_code]",
												email: jQuery("#billing_email").val()
											});
										}
                                    </script>
                                    <!--END: PAYFORT-->
                                    <!--START: PAYPALBRAINTREE-->
                                    <div class="ppBraintree dpm-provider">
                                        <h4>
                                            <label for="online-[id]">
                                                <input onclick="javascript: checkoutSwitch(false); doPaypalBraintreeClientToken();" id="online-[id]" name="payment" type="radio" value="online-[id]" [FIRSTOPTIONCHECKED] />
                                                [payment_description]
                                                <input type="hidden" name="payment_method_nonce" id="payment_method_nonce" />
                                                <input type="hidden" name="device_data" id="device_data"/>
                                                <input type="hidden" name="ppbraintree_payment_type" id="ppbraintree_payment_type"/>
                                                <input type="hidden" id="hdnPayPalBraintreeID" name="hdnPayPalBraintreeID" value="online-[id]" />
                                            </label>
                                        </h4>
                                        <div class="clear"></div>
                                        <div id="divPaymentOption[id]" name="divPaymentOption" style="display:none;">
                                            <div class="row cc-details">
                                                <div id="divPaypalBraintree" class="col-sm-12"></div>
                                                <div class="col-sm-12" id="PaypalBraintreeSaveMyCC">
                                                    <input type="checkbox" name="ff[id]_savecc" id="ff[id]_savecc" value="1" />
                                                    <label for="ff[id]_savecc">[checkout3_savecc]</label>
                                                    <input type="hidden" name="ff[id]_saveccenabled" value="1" />
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- //// paypal braintree scripts v3 //// -->
                                    <script src="https://js.braintreegateway.com/web/dropin/1.14.1/js/dropin.min.js"></script>
			                        <script type="text/javascript">
                                        function doPaypalBraintreeClientToken()
                                        {
			                                if (bolPaypalBRaintreeLoaded == true)
			                                    return;

                                            jQuery.ajax
                                            ({
                                                url: "checkout_one.asp?action=GetPaypalbraintreeClientToken&pid=[PaypalBraintree_pid]",
                                                dataType: 'json',
                                                type: 'POST',
                                                cache: false,
                                                success: function(strResult) {
                                                    if (strResult.IsSuccess == 1)
                                                    {
                                                        if ("[payment_signature]" == "1")
                                                            document.getElementById("PaypalBraintreeSaveMyCC").style.display = 'block';

                                                        var button = document.querySelector('#btnCheckout');
                                                        braintree.dropin.create(
                                                            {
                                                                authorization: strResult.ClientToken,
                                                                container: '#divPaypalBraintree' 
                                                                <!--START: PAYPALBRAINTREE_KOUNT-->
                                                                ,dataCollector:{
                                                                    kount: true
                                                                }
                                                                <!--END: PAYPALBRAINTREE_KOUNT-->
                                                                ,paypal:
                                                                {
                                                                    singleUse: [single_use],
                                                                    amount: [cart_total],
                                                                    currency: '[currency_code]',
                                                                    flow:'[PaypalBraintree_flow]'
                                                                }
                                                                <!--START: PAYPALBRAINTREE_CREDIT-->
                                                                ,paypalCredit:
                                                                {
                                                                    flow:'[PaypalBraintree_flow]',
                                                                    amount: [cart_total],
                                                                    currency: '[currency_code]'
                                                                }
                                                                <!--END: PAYPALBRAINTREE_CREDIT-->
                                                            }
                                                            ,function (createErr, instance)
                                                            {
                                                                button.addEventListener('click', function ()
                                                                {
                                                                  instance.requestPaymentMethod(function (requestPaymentMethodErr, payload)
                                                                  {
                                                                      jQuery("#payment_method_nonce").val(payload.nonce);
                                                                      jQuery("#ppbraintree_payment_type").val(payload.type);

                                                                      <!--START: PAYPALBRAINTREE_KOUNT2-->
                                                                      jQuery("#device_data").val(payload.deviceData);
                                                                      <!--END: PAYPALBRAINTREE_KOUNT2-->

                                                                      doCheckout(document.billing);
                                                                  });
                                                                });
                                                            }
                                                        );
                                                        bolPaypalBRaintreeLoaded = true;
                                                    }
                                                    else
                                                        alert(strResult.ErrorMsg);
                                                },
                                                error: reportError
                                            });
                                        }
                                        function reportError(jqXHR, textStatus)
                                        {
                                            if (jqXHR.status > 0)
                                            {
					                            alert("Error processing payment request. Please, try again.");
					                            //alert(jqXHR.responseText);
				                            }
			                            }
                                    </script>
                                    <!-- ////////////////////////////////////////////// -->

                                    <!--END: PAYPALBRAINTREE-->
                                    <!--START: SQUARE-->
                                    <div class="ccGateway dpm-provider">
                                        <h4>
                                            <label for="online-[id]">
                                                <input onclick="javascript: checkoutSwitch(false); " id="online-[id]" name="payment" type="radio" value="online-[id]" [FIRSTOPTIONCHECKED] />
                                                [payment_description]
                                            </label>
                                        </h4>
                                        <div class="clear"></div>
                                        <div id="divPaymentOption[id]" name="divPaymentOption" style="display:none;" class="sq_PaymentMethod">
                                            <div id="divSquare" class="row cc-details">
                                                <input type="hidden" id="hdnSquareID" name="hdnSquareID" value="online-[id]" />
                                                <input type="hidden" id="sq_nonce" name="sq_nonce">
                                                <div class="ccgField col-sm-12">
                                                    <div class="sq_colleft rr">
                                                        <label for="creditcardnumber">Credit Card Number <span class="error-img required">*</span></label>
                                                    </div>
                                                    <div class="sq_colcenter">
                                                        <div id="sq-card-number" class="sq_input"></div>
                                                    </div>
                                                </div>

                                                <div class="ccgField col-sm-6">
                                                    <div class="sq_colleft rr">
                                                        <label>Expiration <span class="error-img required">*</span></label>
                                                    </div>
                                                    <div class="sq_colcenter">
                                                        <div id="sq-expiration-date" class="sq_input"></div>
                                                    </div>
                                                </div>
                                                <div class="ccgField col-sm-6">
                                                    <div class="sq_colleft rr">
                                                        <label>CVV2 <span class="error-img required">*</span></label>
                                                    </div>
                                                    <div class="sq_colcenter">
                                                        <div id="sq-cvv" class="sq_input"></div>
                                                    </div>
                                                </div>

                                                <div id="divsquarezip" class="ccgField col-sm-12" style="display: none;">
                                                    <label>Postal Code</label>
                                                    <div id="sq-postal-code"></div>
                                                </div>

                                                <div class="ccgField" style="display:none;padding: 0 30px; margin-bottom:15px;" id="SquareSaveMyCC">
                                                    <input type="checkbox" name="ff[id]_savecc" value="1" />
                                                    <div class="left">[checkout3_savecc]</div>
                                                    <input type="hidden" name="ff[id]_saveccenabled" value="1" />
                                                    <div class="clear"></div>
                                                </div>
                                                <!--START: SaveMyCC2-->
                                                <div class="ccgField col-sm-12">
                                                    <input checked type="checkbox" name="ff[id]_savecc" value="1" />
                                                    <label for="creditcardnumber">[checkout3_savecc]</label>
                                                    <input checked type="hidden" name="ff[id]_saveccenabled" value="1" />
                                                    <div class="clear"></div>
                                                </div>
                                                <!--END: SaveMyCC2-->
                                                <!--START: SaveMyCCRec2-->
                                                <div class="ccgField col-sm-12">
                                                    <label>[checkout3_saveccrecurring]</label>
                                                    <div class="clear"></div>
                                                </div>
                                                <!--END: SaveMyCCRec2-->
                                            </div>
                                        </div>
                                    </div>

                                    <script type="text/javascript" src="https://js.squareup.com/v2/paymentform"></script>
                                    <script type="text/javascript">
										var applicationId = '[Squaredata_environment]';
										// Initializes the payment form. See the documentation for descriptions of
										var nsqPaymentForm = new SqPaymentForm({
											applicationId: applicationId,
											inputClass: 'form-control',
											inputStyles: [
												/*{
													color: '#000'
												},
												{
													fontWeight: 400
												},
												{
													fontSize: '12px'
												},
												{
													fontFamily: 'Tahoma'
												},
												{
													lineHeight: '1em'
												},
												{
													padding: '8px 4px'
												},
												{
													boxShadow: '10px 10px 5px #888888'
												},
												{
													backgroundColor: '#fefefe'
												}*/
											],
											cardNumber: {
												elementId: 'sq-card-number',
												placeholder: ''
											},
											cvv: {
												elementId: 'sq-cvv',
												placeholder: 'CVV'
											},
											expirationDate: {
												elementId: 'sq-expiration-date',
												placeholder: 'MM/YY'
											},
											postalCode: {
												elementId: 'sq-postal-code',
												placeholder: ''
											},
											callbacks: {
												// Called when the SqPaymentForm completes a request to generate a card
												// nonce, even if the request failed because of an error.
												cardNonceResponseReceived: function (errors, nonce, cardData) {
													if (errors) {
														try {
															console.log("Encountered errors:");
															errors.some(function (error) {
																console.log('  ' + error.message);
																switch (error.field) {
																	case "cardNumber":
																		jQuery("#sq-card-number").focus();
																		break;
																	case "cvv":
																		jQuery("#sq-cvv").focus();
																		break;
																	case "expirationDate":
																		jQuery("#sq-expiration-date").focus();
																		break;
																}
																alert(error.message);
																return true;
															});
														} catch (e) {
															alert(e);
														}
													} else {
														console.log('  ' + nonce);
														document.getElementById('sq_nonce').value = nonce;
														submitCheckoutForm('Square');
													}
												},
												unsupportedBrowserDetected: function () {
													alert('Unfortunately there is a problem initianing this transaction, due to the browser version you are using.');
												},
												// Fill in these cases to respond to various events that can occur while a
												// buyer is using the payment form.
												inputEventReceived: function (inputEvent) {
													switch (inputEvent.eventType) {
														case 'focusClassAdded':
															// Handle as desired
															break;
														case 'focusClassRemoved':
															// Handle as desired
															break;
														case 'errorClassAdded':
															// Handle as desired
															break;
														case 'errorClassRemoved':
															// Handle as desired
															break;
														case 'cardBrandChanged':
															// Handle as desired
															break;
														case 'postalCodeChanged':
															// Handle as desired
															break;
													}
												},
												paymentFormLoaded: function () {
													// Fill in this callback to perform actions after the payment form is
													// done loading (such as setting the postal code field programmatically).
													nsqPaymentForm.setPostalCode('[billing_zip]');
												}
											}
										});
										// This function is called when a buyer clicks the Submit button on the webpage to charge their card.
										function SquarerequestCardNonce() {
											nsqPaymentForm.requestCardNonce();
										}
                                    </script>
                                    <!--END: SQUARE-->
                                    <!--START: FUTUREPAY-->
                                    <div class="fpay dpm-provider">
                                        <h4>
                                            <label for="online-[id]">
                                                <span class="fpay-radio pull-left">
                                                    <input name="payment" onclick="javascript: checkoutSwitch(false); doCheckout(document.billing);" type="radio" value="online-[id]" />
                                                    <input type="hidden" id="hdnFuturePayID" name="hdnFuturePayID" value="online-[id]" />
                                                    <input type="hidden" id="hdnFuturePayRef" name="hdnFuturePayRef" value="" />
                                                </span>
                                                <span class="fpay-logo pull-left">
                                                    <img src="assets/images/default/fp-logo.png" class="img-responsive" alt="FuturePay" />
                                                    <span class="fpay-logo-text">
                                                        [payment_description]
                                                        (<a id="futurepay-banner" data-promo="buy-now-and-pay-later" data-style="simple-banner">
                                                            <span id="fp-modal-trigger">Learn more</span>
                                                            <script src="https://portal.futurepay.com/media/productPage/futurepay-banner.js"></script>
                                                        </a>)
                                                    </span>
                                                </span>
                                            </label>
                                        </h4>
                                        <div id="divPaymentOption[id]" name="divPaymentOption" style="display:none;">
                                            <div id="futurepay_form" style="display:block;"></div>
                                        </div>
                                    </div>
                                    <!--END: FUTUREPAY-->


                                    <!--START: BREADCHECKOUT-->
                                    <script>
                                        //////////////////////////////////////////////////////////////////////////////////////////////////
                                        //Customize the Bread Checkout Experience
                                        //////////////////////////////////////////////////////////////////////////////////////////////////
                                        // Reference
                                        // https://docs.getbread.com/docs/integration/shopify/customize-experience/#style-the-bread-button
                                        // https://docs.getbread.com/docs/manual-integration/button-styling/#button-structure
                                        //
                                        // leave this variable blank in order to use default Bread Checkout Styles
                                           var BreadCheckoutCustomStyleCSS = ''; 
                                        //
                                        // or to use a custom CSS - All CSS values contained in quotes should use double quotes - example:
                                        // var BreadCheckoutCustomStyleCSS = '@import url(https://fonts.googleapis.com/css?family=Open+Sans:400,600);#bread-button,body,html{height:100%;margin:0;width:100%}body{display:table}#bread-button{background:#EEE;color:#181818;display:table-cell;font-family:"Open Sans",sans-serif;font-size:16px;text-align:center;vertical-align:middle}.bread-text{cursor:pointer;text-decoration:underline;transition:all .2s ease}.bread-text:hover{color:#197797}.bread-dur{text-transform:lowercase;word-spacing:-3px;margin-left:-3px}.bread-embed-inner,.bread-label .bread-embed-icon{display:inline-block}.bread-btn .bread-as-low-as:before,.bread-label .bread-as-low-as:before{content:"As low as "}.bread-btn .bread-for:before{content:"For "}';
                                        ///////////////////////////////////////////////////////////////////////////////////////////////////
                                    </script>
                                    <div class="breadcheckout dpm-provider">
                                        <h4>
                                            <label for="online-[id]">
                                                <input name="payment" onclick="javascript: checkoutSwitch(true);" type="radio" id="online-[id]" value="online-[id]" />
                                                [payment_description]
                                            </label>
                                        </h4>
                                        <div class="clear"></div>
                                        <div id="bread-checkout-btn" data-bread-default-size="true"></div>
                                    </div>
                                    [BREADCHECKOUT_SCRIPTS_BLOCK]
                                    <!--END: BREADCHECKOUT-->

                                    <!--START: STRIPE-->
                                    <div class="stripe dpm-provider">
                                        <h4>
                                            <label for="online-[id]" id="strip-radio">
                                                <input name="payment" onclick="javascript: checkoutSwitch(false);" type="radio" id="online-[id]" value="online-[id]" <input name="payment" onclick="javascript: checkoutSwitch(false);" type="radio" value="online-[id]" [FIRSTOPTIONCHECKED] />
                                                    [payment_description]
                                            </label>
                                        </h4>
                                        <div class="clearfix"></div>
                                        <div id="divStripeJS" name="divStripeJS" style="margin:0 0 0 10px;display:none;">
                                            <div class="desc-message">[payment_description_message]</div>
                                            <div id="card-element"></div>
                                            <div id="card-errors" role="alert"></div>
                                            <!--START: SaveMyCC2-->
                                            <div class="ccgField" style="margin:10px 0 12px 0">
                                                <input checked type="checkbox" name="ff[id]_savecc" value="1" />
                                                <label for="creditcardnumber">[checkout3_savecc]</label>
                                                <input checked type="hidden" name="ff[id]_saveccenabled" value="1" />
                                                <div class="clear"></div>
                                            </div>
                                            <!--END: SaveMyCC2-->
                                        </div>
                                        <script>
                                        // Custom styling can be passed to options when creating an Element.
                                        var StripeJS_style = {
                                            base: {
                                                fontSize: '14px',
                                                color: "#32325d",
                                                lineHeight: '2.429'
                                            }
                                        };
                                        </script>
                                        <script>
                                            jQuery(function () {
                                                jQuery('#strip-radio').on('click', function () {
                                                    jQuery('#divStripeJS').show();
                                                });
                                            });
                                        </script>
                                        <div class="clear"></div>
                                    </div>
                                    <!--END: STRIPE-->



                                    <!--START: WEPAY-->
                                    <script type="text/javascript" src="https://static.wepay.com/min/js/tokenization.v2.js"></script>
                                    <div class="wpay dpm-provider">
                                        <h4>
                                            <label for="online-[id]" class="wpay-radio">
                                                <input name="payment" onclick="javascript: checkoutSwitch(false);" type="radio" value="online-[id]" [FIRSTOPTIONCHECKED]>
                                                [payment_description]
                                                <input type="hidden" id="hdnWePayID" name="hdnWePayID" value="online-[id]" />
                                                <input type="hidden" id="hdnWePayClientID" name="hdnWePayClientID" value="[hdnWePayClientID]" />
                                                <input type="hidden" id="hdnWePayRef" name="hdnWePayRef" value="" />
                                                <input type="hidden" id="hdnWePayGenericErrorMsg" name="hdnWePayGenericErrorMsg" value="[hdnWePayGenericErrorMsg]" />
                                            </label>
                                        </h4>
                                        <div id="divPaymentOption[id]" class="wepaydiv" name="divPaymentOption" style="display:none;">
                                            <div class="row cc-details">
                                                <div class="col-sm-12">
                                                    <div class="wpay-logo"><img src="assets/templates/common/images/wepay-logo.png"></div>
                                                    <div class="desc-message">[payment_description_message]</div>
                                                </div>

                                                <div class="ccgField col-sm-12">
                                                    <label for="creditcardnumber">[CustomerInfo_creditcardnumber]</label>
                                                    <input type="text" onchange="clearContent(this);" id="wepay_ocardno" name="wepay_ocardno" size="30" class="txtBoxStyle form-control">
                                                </div>

                                                <div class="ccgField col-sm-6">
                                                    <label for="creditexpiration">[CustomerInfo_creditexpiration]</label>
                                                    <div class="row">
                                                        <div class="col-xs-6">
                                                            <select id="wepay_ocardexpiresmonth" name="wepay_ocardexpiresmonth" class="txtBoxStyle form-control">
                                                                [monthlist]
                                                            </select>
                                                        </div>

                                                        <div class="col-xs-6">

                                                            <select id="wepay_ocardexpiresyear" name="wepay_ocardexpiresyear" class="txtBoxStyle form-control">
                                                                <option value=""></option>
                                                                [yearlist]
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="ccgField col-sm-3 form-group has-feedback">
                                                    <label for="cvv2">CVV2</label>
                                                    <input type="text" id="wepay_ocardcvv2" name="wepay_ocardcvv2" size="3" class="txtBoxStyle form-control">
                                                    <a href="#" id="cvv-pop" data-toggle="modal" data-target="#cvv_modal" class="cvv2-help form-control-feedback">
                                                        <i class="icon-help-circled"></i>
                                                    </a>
                                                </div>

                                                <!--START: SaveMyCC1-->
                                                <div class="ccgField col-sm-12">
                                                    <input type="checkbox" id="ff[id]_savecc" name="ff[id]_savecc" value="1" />
                                                    <label for="ff[id]_savecc">[checkout3_savecc]</label>
                                                    <input type="hidden" name="ff[id]_saveccenabled" value="1" />
                                                    <div class="clear"></div>
                                                </div>
                                                <!--END: SaveMyCC1-->
                                                <!--START: SaveMyCCRec1-->
                                                <div class="ccgField col-sm-12">
                                                    <label>[checkout3_saveccrecurring]</label>
                                                </div>
                                                <!--END: SaveMyCCRec1-->
                                            </div>
                                        </div>
                                    </div>
                                    <!--END: WEPAY-->
                                    <!--START: AFFIRM-->
                                    <div class="dpm-provider affirm">
                                        <h4>
                                            <label class="affirm-radio">
                                                <input name="payment" onclick="javascript: checkoutSwitch(false); " type="radio" value="online-[id]" />
                                                <input type="hidden" id="hdnAffirmID" name="hdnAffirmID" value="online-[id]" />
                                                [payment_description]
                                            </label>
                                        </h4>
                                        <div id="divPaymentOption[id]" name="divPaymentOption">
                                            <div class="affirm-logo">
                                                <img src="https://cdn-assets.affirm.com/images/blue_logo-transparent_bg.png" style="max-width: 80px;margin: 0 0 10px;" class="img-responsive" />
                                                <p>[payment_description_message]</p>
                                            </div>
                                        </div>
                                    </div>
                                    <!--END: AFFIRM-->
                                    <!--START: SHOPATRON-->
                                    <div class="shopaTron dpm-provider wallet-method">
                                        <h4>[payment_description]</h4>
                                        <div name="divPaymentOption">
                                            <p class="desc-message">[payment_description_message]</p>
                                            <div class="st-button">
                                                <input name="payment" onclick="window.location.href='shopatron.asp';" type="button" class="btn btn-default" value="Checkout with Shopatron" />
                                            </div>
                                        </div>
                                    </div>
                                    <!--END: SHOPATRON-->
                                    <!--START: CCGATEWAY-->
                                    <div class="ccGateway">
                                        <h4>
                                            <label for="online-[id]">
                                                <input onclick="javascript: checkoutSwitch(false);" id="online-[id]" name="payment" type="radio" value="online-[id]" [FIRSTOPTIONCHECKED] />
                                                [payment_description]
                                            </label>
                                        </h4>
                                        <div class="clearfix"></div>
                                        <div id="divPaymentOption[id]" name="divPaymentOption">
                                            <!--START: worldPayGatewayBlock-->
                                            <input type="hidden" id="hdnWorldPayID" name="hdnWorldPayID" value="online-[id]" />
                                            <input type="hidden" id="hdnWorldPayToken" name="hdnWorldPayToken" value="" />
                                            <input type="hidden" id="hdnWorldPayPublicKey" name="hdnWorldPayPublicKey" value="[WorldPayPublicKey]" />
                                            <input type="hidden" id="hdnWorldPayCustomerID" name="hdnWorldPayCustomerID" value="" />
                                            <script type="text/javascript" src="https://gwapi[test_mode].securenet.com/v1/PayOS.js"></script>
                                            <!--END: worldPayGatewayBlock-->
                                            <div class="desc-message">[payment_description_message]</div>
                                            <div class="row cc-details">
                                                <div class="ccgField col-sm-12">
                                                    <label for="cardtype">[CustomerInfo_cardtype]</label>
                                                    <select name="ff[id]_ocardtype" class="txtBoxStyle form-control">
                                                        [cctype]
                                                    </select>
                                                    <span class="error-img required">*</span>
                                                    <div class="clearfix"></div>
                                                </div>
                                                <div class="ccgField col-sm-12">
                                                    <label for="creditcardnumber">[CustomerInfo_creditcardnumber]</label>
                                                    <input type="text" name="ff[id]_ocardno" size="30" class="txtBoxStyle form-control" placeholder="[CustomerInfo_creditcardnumber]" />
                                                    <span class="error-img required">*</span>
                                                    <div class="clearfix"></div>
                                                </div>
                                                <!--START: ccStartDate-->
                                                <div class="ccgField col-sm-6">
                                                    <label for="creditstartdate">[CustomerInfo_creditstartdate]</label>
                                                    <div class="row">
                                                        <div class="col-sm-6 col-xs-6">
                                                            <select name="ff[id]_ocardstartmonth" class="txtBoxStyle form-control">
                                                                <option value=""></option>
                                                                [monthlist]
                                                            </select>
                                                        </div>
                                                        <div class="col-sm-6 col-xs-6">
                                                            <select name="ff[id]_ocardstartyear" class="txtBoxStyle form-control">
                                                                <option value=""></option>
                                                                [yearlistdtstart]
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <span class="error-img required">(Maestro, Solo and Amex only) *</span>
                                                    <div class="clearfix"></div>
                                                </div>
                                                <!--END: ccStartDate-->
                                                <div class="ccgField col-sm-6">
                                                    <label for="creditexpiration">[CustomerInfo_creditexpiration]</label>
                                                    <div class="row">
                                                        <div class="col-sm-6 col-xs-6">
                                                            <select name="ff[id]_ocardexpiresmonth" class="txtBoxStyle form-control">
                                                                [monthlist]
                                                            </select>
                                                        </div>
                                                        <div class="col-sm-6 col-xs-6">
                                                            <select name="ff[id]_ocardexpiresyear" class="txtBoxStyle form-control">
                                                                [yearlist]
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <span class="error-img required">*</span>
                                                    <div class="clearfix"></div>
                                                </div>
                                                <!--START: ccIssueNumber-->
                                                <div class="ccgField col-sm-12">
                                                    <label for="creditissuenumber">[CustomerInfo_creditissuenumber]</label>
                                                    <input type="text" name="ff[id]_ocardissue" maxlength="10" size="3" class="txtBoxStyle form-control" placeholder="[CustomerInfo_creditissuenumber]" />
                                                    (Maestro and Solo only) <span class="error-img required">*</span>
                                                    <div class="clearfix"></div>
                                                </div>
                                                <!--END: ccIssueNumber-->
                                                <div class="ccgField col-sm-3 form-group has-feedback">
                                                    <label for="cvv2">CVV2</label>
                                                    <input type="text" name="ff[id]_ocardcvv2" size="3" class="txtBoxStyle form-control" placeholder="CVV2" />
                                                    <!--START: cvvrequired--><input type="hidden" name="hdnCvvRequired" id="hdnCvvRequired" value="1" />
                                                    <span class="error-img required">*</span><!--END: cvvrequired-->
                                                    <a href="#" id="cvv-pop" data-toggle="modal" data-target="#cvv_modal" class="cvv2-help form-control-feedback">
                                                        <i class="icon-help-circled"></i>
                                                    </a>
                                                    <div class="clearfix"></div>
                                                </div>
                                                <div class="clearfix"></div>
                                                <!--START: SaveMyCC2-->
                                                <div class="ccgField col-sm-12">
                                                    <label for="creditcardnumber">[checkout3_savecc]</label>
                                                    <input checked type="checkbox" name="ff[id]_savecc" value="1" />
                                                    <input checked type="hidden" name="ff[id]_saveccenabled" value="1" />
                                                    <div class="clearfix"></div>
                                                </div>
                                                <!--END: SaveMyCC2-->
                                                <!--START: SaveMyCCRec2-->
                                                <div class="ccgField col-sm-12">
                                                    <label>[checkout3_saveccrecurring]</label>
                                                    <div class="clearfix"></div>
                                                </div>
                                                <!--END: SaveMyCCRec2-->
                                                <div class="clearfix"></div>
                                            </div>
                                        </div>

                                        <!--START: AUTHORIZENET_ACCEPTJS-->
                                        <input type="hidden" name="opaqueData" id="authorizenet_opaquedata" value="" />
                                        <input type="hidden" id="hdnAuthNetID" name="hdnAuthNetID" value="online-[id]" />
                                        [authorizenet_accept_jsURL]
                                        <script type="text/javascript">
										function sendPaymentDataToAnet() {
											var secureData = {}, authData = {}, cardData = {};

											cardData.cardNumber = jQuery('[name="ff[id]_ocardno"]').val();
											cardData.month = jQuery('[name="ff[id]_ocardexpiresmonth"]').val();
											cardData.year = jQuery('[name="ff[id]_ocardexpiresyear"]').val();
											cardData.cardCode = jQuery('[name="ff[id]_ocardcvv2"]').val();
											secureData.cardData = cardData;

											authData.clientKey = '[Auth_public_clientKey]';
											authData.apiLoginID = '[authData_apiLoginID]';
											secureData.authData = authData;
											Accept.dispatchData(secureData, 'handleAuthnetResponse');
										}

										window.handleAuthnetResponse = function (response) {
											if (response.messages.resultCode === 'Error') {
												for (var i = 0; i < response.messages.message.length; i++) {
													console.log(response.messages.message[i].code + ':' + response.messages.message[i].text);
													switch (response.messages.message[i].code) {
														case 'E_WC_05':
															jQuery('#ff[id]_ocardno').focus();
															break;
														case 'E_WC_08':
															jQuery('#ff[id]_ocardexpiresmonth').focus();
															break;
													}
													alert(response.messages.message[i].text);
													return;
												}
											} else {
												useOpaqueData(response.opaqueData);
											}
										}

										function useOpaqueData(responseData) {
											console.log(responseData.dataDescriptor);
											console.log(responseData.dataValue);
											document.getElementById('authorizenet_opaquedata').value = responseData.dataValue;
											doCheckout(document.billing);
										}
                                        </script>
                                        <!--END: AUTHORIZENET_ACCEPTJS-->
                                    </div>
                                    <!--END: CCGATEWAY-->
                                    <!--START: AUTHNETCIMBLOCK-->
                                    <div class="authneticIMBlock dpm-provider">
                                        <h4>
                                            <label for="online-CIM">
                                                <input onclick="javascript:checkoutSwitch(false);" id="online-CIM" name="payment" type="radio" value="online-CIM" [FIRSTOPTIONCHECKED] />
                                                [payment_description]
                                            </label>
                                        </h4>
                                        <div class="clear"></div>
                                        <div id="divPaymentOptionCIM" name="divPaymentOptionCIM" style="display:none;">
                                            <!--START: authCIMBlock-->
                                            <div class="cimField">
                                                <label for="use-creditcard-on-file">[checkout3_use-creditcard-on-file]</label>
                                                <select name="authCIMProfileID" id="authCIMProfileID" class="txtBoxStyle form-control">
                                                    <!--START: authCIMPaymentProfileItem-->
                                                    <!--START: authCIMPaymentProfileItemCC-->
                                                    <option value="authCIMProfileID_[custProfId]_[custPmntProfId]_[authCIMProfileID_cardlastdigits]_[authCIMProfileID_cardexp]_[authCIMOnlinePmtId]"> [CIMGateWay][checkout3_creditcard-last-digits]: [authCIMProfileID_cardlastdigits] / [CustomerInfo_creditexpiration]: [authCIMProfileID_cardexp]</option>
                                                    <!--END: authCIMPaymentProfileItemCC-->
                                                    <!--START: authCIMPaymentProfileItemECheck-->
                                                    <option value="authCIMProfileID_[custProfId]_[custPmntProfId]_[authCIMProfileID_cardlastdigits]_[authCIMProfileID_cardexp]_[authCIMOnlinePmtId]"> [CIMGateWay][checkout3_bankaccountonfile]: [authCIMProfileID_cardlastdigits]</option>
                                                    <!--END: authCIMPaymentProfileItemECheck-->
                                                    <!--END: authCIMPaymentProfileItem-->
                                                </select>
                                                <div class="clear"></div>
                                            </div>
                                            <!--END: authCIMBlock-->
                                        </div>
                                    </div>
                                    <!--END: AUTHNETCIMBLOCK-->
                                    <!--START: MILITARYSTAR-->
                                    <div class="militaryStar dpm-provider">
                                        <h4>
                                            <label for="online-[id]">
                                                <input type="hidden" value="1" name="ff[id]_isstarcard" id="ff[id]_isstarcard" />
                                                <input onclick="javascript:checkoutSwitch(false);" id="online-[id]" name="payment" type="radio" value="online-[id]" [FIRSTOPTIONCHECKED] />
                                                [payment_description]
                                            </label>
                                        </h4>
                                        <div class="clear"></div>
                                        <div id="divPaymentOption[id]" name="divPaymentOption" style="display:none;">
                                            <div class="desc-message">[payment_description_message]</div>
                                            <div class="msField">
                                                <label for="ff[id]_ocardno">[CustomerInfo_creditcardnumber]</label>
                                                <input type="text" onchange="clearContent(this);" name="ff[id]_ocardno" size="30" class="txtBoxStyle" />
                                                <img src="assets/templates/common/images/error2.gif" width="12" height="12" alt="" />
                                                <div class="clear"></div>
                                            </div>
                                        </div>
                                        <div class="clear"></div>
                                    </div>
                                    <!--END: MILITARYSTAR-->
                                    <!--START: CHECKGATEWAY-->
                                    <div class="chkGateway dpm-provider">
                                        <h4>
                                            <label for="online-[id]">
                                                <input onclick="javascript:checkoutSwitch(false);" id="online-[id]" name="payment" type="radio" value="online-[id]" [FIRSTOPTIONCHECKED] />
                                                [payment_description]
                                            </label>
                                        </h4>
                                        <div class="clear"></div>
                                        <div id="divPaymentOption[id]" name="divPaymentOption" style="display:none;">
                                            <div class="desc-message">[payment_description_message]</div>
                                            <!--START: CheckType-->
                                            <div class="chkField">
                                                <label for="ff[id]_ochecktype">[CustomerInfo_check-type]</label>
                                                <select name="ff[id]_ochecktype" class="txtBoxStyle">
                                                    [checktypelist]
                                                </select>
                                                <img src="assets/templates/common/images/error2.gif" width="12" height="12" alt="" />
                                                <div class="clear"></div>
                                            </div>
                                            <!--END: CheckType-->
                                            <!--START: AccountType-->
                                            <div class="chkField">
                                                <label for="ff[id]_ocheckaccttype">[CustomerInfo_check-acct-type]</label>
                                                <select name="ff[id]_ocheckaccttype" class="txtBoxStyle">
                                                    [checkaccttypelist]
                                                </select>
                                                <img src="assets/templates/common/images/error2.gif" width="12" height="12" alt="" />
                                                <div class="clear"></div>
                                            </div>
                                            <!--END: AccountType-->
                                            <div class="chkField">
                                                <label for="ff[id]_ocheckrouting">[CustomerInfo_check-routing]</label>
                                                <input type="text" name="ff[id]_ocheckrouting" maxlength="9" size="10" class="txtBoxStyle" />
                                                <img src="assets/templates/common/images/error2.gif" width="12" height="12" alt="" />
                                                <div class="clear"></div>
                                            </div>
                                            <div class="chkField">
                                                <label for="ff[id]_ocheckaccount">[CustomerInfo_check-acct]</label>
                                                <input type="text" name="ff[id]_ocheckaccount" maxlength="30" size="10" class="txtBoxStyle" />
                                                <img src="assets/templates/common/images/error2.gif" width="12" height="12" alt="" />
                                                <div class="clear"></div>
                                            </div>
                                            <!--START: SaveMyeCheck-->
                                            <div class="chkField">
                                                <label for="ff[id]_savecc">[CustomerInfo_check-save-account-token]</label>
                                                <input type="checkbox" name="ff[id]_savecc" id="ff[id]_savecc" value="1" />
                                                <input type="hidden" name="ff[id]_saveccenabled" value="1" />
                                                <div class="clear"></div>
                                            </div>
                                            <!--END: SaveMyeCheck-->
                                            <!--START: SaveMyCCRec3-->
                                            <div>
                                                <label>[checkout3_saveccrecurring]</label>
                                                <div class="clear"></div>
                                            </div>
                                            <!--END: SaveMyCCRec3-->
                                        </div>
                                    </div>
                                    <!--END: CHECKGATEWAY-->
                                    <!--START: LINKGATEWAY-->
                                    <div class="linkGateway dpm-provider">
                                        <h4>
                                            <label for="online-[id]">
                                                <input onclick="javascript:checkoutSwitch(false);" id="online-[id]" name="payment" type="radio" value="online-[id]" [FIRSTOPTIONCHECKED] />
                                                [payment_description]
                                            </label>
                                        </h4>
                                        <div class="clear"></div>
                                        <div id="divPaymentOption[id]" name="divPaymentOption" style="display:none;">
                                            <div class="desc-message">[payment_description_message]</div>
                                            <div class="payment-desc">Pay [payment_description]</div>
                                            <div class="clear"></div>
                                        </div>
                                        <div class="clear"></div>
                                    </div>
                                    <!--END: LINKGATEWAY-->
                                    
                                    <!--START: LINKGATEWAY_APP-->
                                    <div class="linkGateway dpm-provider">
                                        <h4>
                                            <label style="line-height: 40px;" for="online-[id]">
                                                <input onclick="javascript:checkoutSwitch(false);" id="online-[id]" name="payment" type="radio" value="online-[id]" [FIRSTOPTIONCHECKED] />
                                                [payment_description]                                                
                                            </label>
                                            <!--START: payment_logo-->
                                                <img src="[payment_logo_url]" border="0" width="17%" style="float: right; max-height: 40px; width: auto; margin-left: 15px; ">
                                            <!--END: payment_logo-->
                                        </h4>
                                    </div>
                                    <!--END: LINKGATEWAY_APP-->

                                    <!--START: FATTMERCHANT-->
                                    <script>
                                        var FattMerchant_CCNumber_Style = {
                                            id: 'fattjs-number',
                                            placeholder: 'Credit Card Number',
                                            style: 'width: 97%;  border-radius: 3px; border: 1px solid #ccc; padding: .5em .5em; font-size: 96%;background-color: white;'
                                        }

                                        var FattMerchant_CVV2_Style = {
                                            id: 'fattjs-cvv',
                                            placeholder: 'CVV2',
                                            style: 'width: 40px; border: 1px solid #ccc; padding: .5em .5em; font-size: 96%;background-color: white;font-family:Raleway, sans-serif;'
                                            }
                                    </script>
                                    <div class="fattmerchant dpm-provider">
                                        <h4>
                                            <label for="online-[id]">
                                                <input onclick="javascript: checkoutSwitch(false);" id="online-[id]" name="payment" type="radio" value="online-[id]" [FIRSTOPTIONCHECKED] />
                                                [payment_description]
                                            </label>
                                        </h4>
                                        <div class="clear"></div>


                                        <div id="divPaymentOption[id]" class="wepaydiv" name="divPaymentOption" style="display:none;">
                                            <div class="row cc-details">
                                            <!--
                                                <div class="col-sm-12">
                                                    <div class="wpay-logo"><img src="assets/templates/common/images/wepay-logo.png"></div>
                                                    <div class="desc-message">[payment_description_message]</div>
                                                </div>-->

                                                <div class="ccgField col-sm-12">
                                                    <label for="creditcardnumber">[CustomerInfo_creditcardnumber]</label>
                                                    <div id="fattjs-number" style="height:35px;"></div>
                                                </div>

                                                <div class="ccgField col-sm-6">
                                                    <label for="creditexpiration">[CustomerInfo_creditexpiration]</label>
                                                    <div class="row">
                                                        <div class="col-xs-6">
                                                            <select id="ff[id]_ocardexpiresmonth" name="ff[id]_ocardexpiresmonth"  class="txtBoxStyle form-control">
                                                                [monthlist]
                                                            </select>
                                                        </div>

                                                        <div class="col-xs-6">
                                                            
                                                            <select id="ff[id]_ocardexpiresyear" name="ff[id]_ocardexpiresyear" class="txtBoxStyle form-control">
                                                                [yearlist]
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="ccgField col-sm-3 form-group has-feedback">
                                                    <label for="cvv2">CVV2</label><a href="#" id="cvv-pop" data-toggle="modal" data-target="#cvv_modal">
                                                        <i class="icon-help-circled"></i>
                                                    </a>
                                                    <div id="fattjs-cvv" style="height:35px;"></div>
                                                    
                                                </div>
												<!--START: SaveMyCC2-->
												<div class="ccgField col-sm-12">
													<input checked type="checkbox" id="ff[id]_savecc" name="ff[id]_savecc" value="1" />
                                                    <label for="ff[id]_savecc">[checkout3_savecc]</label>
													<input checked type="hidden" name="ff[id]_saveccenabled" value="1" />
													<div class="clear"></div>
												</div>
												<!--END: SaveMyCC2-->

                                            </div>
                                        </div>
                                    </div>
                                    <!--END: FATTMERCHANT-->



                                    <!--START: ZIPPAYMONEY-->
                                    <div class="divZipPay">
                                        <h4>
                                            <label for="online-[id]">
                                                <input onclick="javascript: checkoutSwitch(false);" id="online-[id]" name="payment" type="radio" value="online-[id]" />
                                                [payment_description]
                                                <input type="hidden" id="hdnZippayID" name="hdnZippayID" value="online-[id]" />
                                            </label>
                                        </h4>
                                        <div class="clearfix"></div>
                                        <div id="divPaymentOption[id]" name="divPaymentOption">
                                            <div class="desc-message">[payment_description_message]</div>
                                        </div>
                                    </div>
                                    <script type="text/javascript" src="https://account.zipmoney.com.au/scripts/iframe/zipmoney-checkout.js"></script>
                                    <!--END: ZIPPAYMONEY-->
                                    <!--START: ELAYAWAYGATEWAY-->
                                    <div class="elayawayGateway">
                                        <h4>
                                            <label for="online-[id]">
                                                <input onclick="javascript: checkoutSwitch(false);" id="online-[id]" name="payment" type="radio" value="online-[id]" [FIRSTOPTIONCHECKED] />
                                                [payment_description]
                                            </label>
                                        </h4>
                                        <div class="clearfix"></div>
                                        <div id="divPaymentOption[id]" name="divPaymentOption">
                                            <div class="desc-message">[payment_description_message]</div>
                                            <div class="divElayaway">
                                                <a name="eLayAway"></a> <a onclick="eLayaway.button_click({amount:'[lay_order_total]',
            merchant_name:'[company_name]',
            max_lay_length: [max_lay_length],
            eci_form: 'eci_form',
            months_field: 'months',
            payment_frequency_field: 'payment_frequency',
            currency_code:'[currency_code]'}, event);" href="javascript:void(0);">Select Term</a>
                                                <div name="divElayawayInfo" id="divElayawayInfo"></div>
                                            </div>
                                            <div class="clearfix"></div>
                                        </div>
                                        <div class="clearfix"></div>
                                    </div>
                                    <!--END: ELAYAWAYGATEWAY-->
                                    <!--START: CUSTOM-->
                                    <div class="customGateway">
                                        <h4>
                                            <label for="offline-[id]">
                                                <input onclick="javascript: checkoutSwitch(false);" id="offline-[id]-custom" name="payment" type="radio" value="offline-[id]" [FIRSTOPTIONCHECKED] />
                                                [payment_type]
                                            </label>
                                        </h4>
                                        <div class="clearfix"></div>
                                        <div id="divPaymentOption[id]-custom" name="divPaymentOption">
                                            <div class="payment-desc">[payment_description]</div>
                                            <div class="payment-type">[payment_type]</div>
                                            <!--START: CUSTOM_FIELD-->
                                            <div class="custField">
                                                <div class="cust-input">[InputName]</div>
                                                <div class="cust-field">[field]</div>
                                                <div class="clearfix"></div>
                                            </div>
                                            <!--END: CUSTOM_FIELD-->
                                            <div class="clearfix"></div>
                                        </div>
                                        <div class="clearfix"></div>
                                    </div>
                                    <!--END: CUSTOM-->
                                </div>
                                <div class="clearfix"></div>
                                <!--END: PAYMENT_BLOCK-->
                            </div>

                            <!--START: allow_different_billing-->
                            <div class="billingAddress-section  module-section">
                                <div class="header">
                                    <h3 class="page_heading">[account_billing-info]</h3>
                                    <div class="clearfix"></div>
                                </div>

                                <div id="divBillingInfo" style="display:[divBillingInfoDisplay];">
                                    <p class="hidden">[checkout3_billingcomment]</p>

									<label class="hidden"><input id="sameAsShippingCheck" type="checkbox" name="check1" value="1" [BCHECKED] /></label>

                                    <div class="row">
                                        <div class="billingOptions col-sm-12"><label for="ship_info_same" class="radio-inline showspan sameAsShipping"><input id="ship_info_same" name="ship_info_radio" type="radio" value="1" checked="checked" /> [checkout3_billingsameasshipping]</label></div>
                                        <div class="billingOptions col-sm-12"><label for="ship_info_dif" class="radio-inline showspan sameAsShipping"><input id="ship_info_dif" name="ship_info_radio" type="radio" value="2" /> Use a different billing address</label></div>
                                    </div>
                                    <div id="billingAddress-form-fieldset" class="row billingAddress-form bg-alternative">

                                        <div class="chkField col-sm-6">
                                            <label for="billing_firstname" class="validation-field labelholder">
												<input name="billing_firstname" type="text" id="billing_firstname" value="[billing_firstname]" size="15" tabindex="2" maxlength="100" class="txtBoxStyle form-control" placeholder="[CustomerInfo_firstname]" required />
												<!--START: req_billing_firstname-->
												<!--END: req_billing_firstname-->
												<span class="required-indicator"></span>
											</label>
                                        </div>

                                        <div class="chkField col-sm-6">
                                            <label for="billing_lastname" class="validation-field labelholder">
												<input name="billing_lastname" type="text" id="billing_lastname" value="[billing_lastname]" size="15" tabindex="3" maxlength="100" class="txtBoxStyle form-control" placeholder="[CustomerInfo_lastname]" required />
												<!--START: req_billing_lastname-->
												<!--END: req_billing_lastname-->
												<span class="required-indicator"></span>
											</label>
                                        </div>
                                        <div class="chkField col-sm-12">
                                            <label for="billing_company" class="validation-field labelholder">
												<input name="billing_company" type="text" id="shipping_company2" value="[billing_company]" size="25" tabindex="4" maxlength="255" class="txtBoxStyle form-control" placeholder="[CustomerInfo_company]" />
                                            </label>
                                        </div>
                                        <div class="chkField col-sm-8">
                                            <label for="billing_address" class="validation-field labelholder">
												<input name="billing_address" type="text" id="billing_address" value="[billing_address]" size="25" tabindex="5" maxlength="255" class="txtBoxStyle form-control" placeholder="[CustomerInfo_address]" required />
												<!--START: req_billing_address-->
												<!--END: req_billing_address-->
												<span class="required-indicator"></span>
                                            </label>
                                        </div>
                                        <div class="chkField col-sm-4">
                                            <label for="billing_address2" class="validation-field labelholder">
												<input name="billing_address2" type="text" id="billing_address2" value="[billing_address2]" size="25" tabindex="6" maxlength="50" class="txtBoxStyle form-control" placeholder="[CustomerInfo_address2]" />
                                            </label>
                                        </div>
                                        <div class="chkField col-sm-12">
                                            <label for="billing_city" class="validation-field labelholder">
												<input name="billing_city" type="text" id="billing_city" value="[billing_city]" size="25" tabindex="7" maxlength="100" class="txtBoxStyle form-control" placeholder="[CustomerInfo_city]" required />
												<!--START: req_billing_city-->
												<!--END: req_billing_city-->
												<span class="required-indicator"></span>
                                            </label>
                                        </div>
                                        <div class="chkField col-sm-5">
                                            <label for="billing_country" class="validation-field labelholder" data-label="[CustomerInfo_country]">
												<select name="billing_country" onchange="document.billing.action='checkout3.asp?step=3&action=updatecountry';document.billing.submit();" tabindex="8" class="txtBoxStyle form-control" id="billing_country" required >[CountryDropDown]</select>
												<!--START: req_billing_country-->
												<!--END: req_billing_country-->
												<span class="required-indicator"></span>
                                            </label>
                                        </div>
                                        <div class="chkField col-sm-5 state-select">
                                            <label for="" class="validation-field labelholder" data-label="[CustomerInfo_state]">
												[state]
												<!--START: req_billing_state-->
												<!--END: req_billing_state-->
												<span class="required-indicator"></span>
                                            </label>
                                        </div>
                                        <div class="chkField col-sm-2">
                                            <label for="billing_zip" class="validation-field labelholder">
												<input name="billing_zip" type="text" id="billing_zip" value="[billing_zip]" size="10" tabindex="10" maxlength="20" class="txtBoxStyle form-control" placeholder="[CustomerInfo_zip]" required />
												<!--START: req_billing_zip-->
												<!--END: req_billing_zip-->
												<span class="required-indicator"></span>
                                            </label>
                                        </div>
                                        <div class="chkField col-sm-12">
                                            <label for="billing_phone" class="validation-field labelholder">
												<input name="billing_phone" type="text" id="billing_phone" value="[billing_phone]" size="25" tabindex="11" maxlength="50" class="txtBoxStyle form-control" placeholder="[CustomerInfo_phone]" />
												<!--START: req_billing_phone-->
												<!--END: req_billing_phone-->
												<span class="required-indicator"></span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!--END: allow_different_billing-->
                            <!--START: samebilling_billing-->
                            <!--start billing same as shipping-->
                            <!--START: showsamebillingasshipping-->
                            <div class="billingAddress-section  module-section">
                                <div class="header">
                                    <h3 class="page_heading">[checkout3_Header-billingaddress]</h3>
                                    <div class="clearfix"></div>
                                </div>
                                <div class="billingAddress pad10 boxShadow">
                                    <p>[billing_firstname] [billing_lastname]</p>
                                    <!--START: billing_company-->
                                    <p>[billing_company]</p>
                                    <!--END: billing_company-->
                                    <p>[billing_address]</p>
                                    <!--START: billing_address2-->
                                    <p>[billing_address2]</p>
                                    <!--END: billing_address2-->
                                    <p>[billing_city], [billing_state] [billing_zip] [billing_country]</p>
                                    <div class="button left"><a href="checkout.asp?step=1" class="icon-btn icon-btn-geopin">[checkout2_shippinginfochange]</a></div>
                                    <div class="clearfix"></div>
                                </div>
                            </div>
                            <!--END: showsamebillingasshipping-->
                            <input name="billing_firstname" type="hidden" id="shipping_firstname2" value="[shipping_firstname]" />
                            <input name="billing_lastname" type="hidden" id="shipping_lastname3" value="[shipping_lastname]" />
                            <input name="billing_company" type="hidden" id="shipping_company2" value="[shipping_company]" size="25" />
                            <input name="billing_phone" type="hidden" id="shipping_phone2" value="[shipping_phone]" size="25" />
                            <input name="billing_address" type="hidden" id="shipping_address3" value="[shipping_address]" size="25" />
                            <input name="billing_address2" type="hidden" id="shipping_address22" value="[shipping_address2]" size="25" />
                            <input name="billing_city" type="hidden" id="shipping_city2" value="[shipping_city]" size="25" />
                            <input name="billing_country" type="hidden" value="[shipping_country]" />
                            <input name="billing_state" type="hidden" id="Hidden1" value="[shipping_state]" />
                            <input name="billing_zip" type="hidden" id="Hidden2" value="[shipping_zip]" />
                            <!--end billing same as shipping-->
                            <!--END: samebilling_billing-->

                             <!--START: checkout_addfees-->
                            <div id="divCheckoutAddFees" class="checkout-addfees module-section">
                                <div class="header">
                                    <h3 class="page_heading">[checkout1_checkoutaddfees-subtitle]</h3>
                                    <div class="clearfix"></div>
                                </div>
                                <div class="checkout-addfees-questions pad10 boxShadow">
                                    <!--START: checkout_addfees_questions-->[checkout_addfees_questions]<!--END: checkout_addfees_questions-->
                                    <div class="clearfix"></div>
                                </div>
                                <!--START: checkout_addfees_templates-->
                                <div class="checkout_addfees_templates form-horizontal">                                   
                                    <!--START: checkout_addfees_radio-format-->
                                    <div class="chk-questions-section">
                                        <label for="cka[id]">[question] 
											<!--START: req[id]--><span class="required">*</span><!--END: req[id]-->
										</label>
                                        <input type="hidden" name="question[id]" value="[id]" />
                                        <!--START: option-->                                       
                                        <div class="radio-box">
                                            <div class="radio-option">
                                                <label class="radio">
											        <label>
												        <input type="radio" name="cka[id]" value="[optionvalue]" class="txtBoxStyle" [selected] onchange="javascript: ChangeOption('cka[id]',0);" />
												        [optionname]
											        </label>
										        </label>
                                            </div>
										    <div class="option-price">[optionprice]</div>
                                            <div class="clearfix"></div>
                                            <!--START: option_description-->
                                            <p style="clear:both;margin:0">[optiondescription]</p>
                                            <!--END: option_description-->
                                        </div>                                       
										<!--END: option-->
                                        <div class="clearfix"></div>
                                    </div>
                                    <!--END: checkout_addfees_radio-format-->
                                    <!--START: checkout_addfees_dropdown-format-->
                                    <div class="chk-questions-section">                                      
                                        <label for="cka[id]">[question] 
											<!--START: req[id]--><span class="required">*</span><!--END: req[id]-->
										</label>
                                        <label class="select">
                                            <input type="hidden" name="question[id]" value="[id]" />
                                            <select id="cka[id]" name="cka[id]" onchange="javascript: ChangeOption('cka[id]',1);">
                                                <!--START: option-->
                                                <option value="[optionvalue]" [selected]>[optionname] - [optionprice]</option>
                                                <!--END: option-->
                                            </select>
                                        </label>
                                        <div class="clearfix"></div>
                                    </div>
                                    <!--END: checkout_addfees_dropdown-format-->
                                    
                                    <div class="clearfix"></div>
                                </div>
                                <!--END: checkout_addfees_templates-->
                            </div>
                            <script>
                                function ChangeOption(name,type)
                                {
                                    var option = "";

                                    //types
                                    //0 - radio 
                                    //1 - select

                                    if(type==0)
                                        option = jQuery('.checkout-addfees input[name="' + name + '"]:checked').val();
                                    else
                                        option = jQuery('.checkout-addfees [name="' + name + '"]').val();
                                        
                                    if (option != undefined && option != 'undefined')
                                    {
                                         jQuery.ajax({
                                            type: 'POST',
                                            dataType: "json",
                                            url: "checkout_one.asp?action=checkoutaddons&option=" + option,
                                            data: '',
                                            async: true,                                            
                                            success: function (response) 
                                            {
                                                if (!response.success)
                                                    console.log("Error trying to save additional option. " + response.error);
                                                
                                            },
                                            error: function (xhr, textStatus, errorThrown) {
                                                console.log("Error trying to save additional option." + "\n" + xhr.responseText + "\n" + textStatus + "\n" + errorThrown);                                               
                                            }
                                        });
                                    }
                                }
                            </script>
                            <!--END: checkout_addfees-->
                            

                            <!--START: checkout_questions-->
                            <div id="chkQuestions" class="module-section">
                                <div class="header">
                                    <h3 class="page_heading">[checkout1_checkoutquestions]</h3>
                                    <div class="clearfix"></div>
                                </div>
                                <div class="chkQuestions pad10 boxShadow">
                                    <!--START: questions-->[questions]<!--END: questions-->
                                    <div class="clearfix"></div>
                                </div>
                                <!--START: checkout_questions_templates-->
                                <div class="chkQuestionsTemplates form-horizontal">
                                    <!--START: textarea-format-->
                                    <div class="chk-questions-section">
                                        <div class="textarea-format">
                                            <!--START: req[id]-->
                                            <div class="required">
                                                <span class="error-img required">*</span>
                                            </div>
                                            <!--END: req[id]-->
                                            <label for="cq[id]">[question]</label>
                                            <input type="hidden" name="question[id]" value="[id]" />
                                            <textarea cols="30" rows="5" name="cq[id]" class="form-control txtBoxStyle" autocomplete="off">[answer]</textarea>
                                            <div class="clearfix"></div>
                                        </div>
                                    </div>
                                    <!--END: textarea-format-->
                                    <!--START: text-format-->
                                    <div class="chk-questions-section">
                                        <!--START: req[id]-->
                                        <div class="required">
                                            <span class="error-img required">*</span>
                                        </div>
                                        <!--END: req[id]-->
                                        <label for="cq[id]">[question]</label>
                                        <input type="hidden" name="question[id]" value="[id]" />
                                        <input type="text" size="30" name="cq[id]" value="[answer]" class="form-control txtBoxStyle" autocomplete="off" />
                                        <div class="clearfix"></div>
                                    </div>
                                    <!--END: text-format-->
                                    <!--START: checkbox-format-->
                                    <div class="chk-questions-section">
                                        <!--START: req[id]-->
                                        <div class="required">
                                            <span class="error-img required">*</span>
                                        </div>
                                        <!--END: req[id]-->
                                        <label class="checkbox">
                                            <input type="hidden" name="question[id]" value="[id]" />
                                            <input type="checkbox" name="cq[id]" class="txtBoxStyle" value="[answer]" [selected] />
                                            [question]
                                        </label>
                                        <div class="clearfix"></div>
                                    </div>
                                    <!--END: checkbox-format-->
                                    <!--START: radio-format-->
                                    <div class="chk-questions-section">
                                        <!--START: req[id]-->
                                        <div class="required">
                                            <span class="error-img required">*</span>
                                        </div>
                                        <!--END: req[id]-->
                                        <label for="cq[id]">[question]</label>
                                        <input type="hidden" name="question[id]" value="[id]" />
                                        <!--START: option-->
                                        <span class="radio-inline">
                                            <input type="radio" name="cq[id]" value="[option]" class="txtBoxStyle" [selected] />
                                            [option]
                                        </span>
                                        <!--END: option-->
                                        <div class="clearfix"></div>
                                    </div>
                                    <!--END: radio-format-->
                                    <!--START: dropdown-format-->
                                    <div class="chk-questions-section">
                                        <!--START: req[id]-->
                                        <div class="required">
                                            <span class="error-img required">*</span>
                                        </div>
                                        <!--END: req[id]-->
                                        <label for="cq[id]">[question]</label>
                                        <label class="select">
                                            <input type="hidden" name="question[id]" value="[id]" />
                                            <select name="cq[id]">
                                                <!--START: option-->
                                                <option value="[option]" [selected]>[option]</option>
                                                <!--END: option-->
                                            </select>
                                        </label>
                                        <div class="clearfix"></div>
                                    </div>
                                    <!--END: dropdown-format-->
                                    <!--START: calendar-format-->
                                    <div class="chk-questions-section clearfix">
                                        <div class="form-group">
                                            <label for="cq[id]">[question]
                                                <!--START: req[id]--><span class="required">*</span><!--END: req[id]-->
                                            </label>
                                            <input type="text" size="30" name="cq[id]" value="[answer]" class="form-control calendar-format txtBoxStyle" readonly />
                                        </div>
                                    </div>
                                    <!--END: calendar-format-->
                                    <div class="clearfix"></div>
                                </div>
                                <!--END: checkout_questions_templates-->
                            </div>
                            <!--END: checkout_questions-->
                            <div id="divCheckoutComments" class="module-section">
                                <div class="header">
                                    <h3 class="page_heading">[checkout3_Header-comment]</h3>
                                    <div class="clearfix"></div>
                                </div>
                                <div class="chkComments">
                                    <label for="ocomment">[checkout3_commentmessage]</label>
                                    <textarea name="ocomment" class="txtBoxStyle form-control" aria-label="[checkout3_commentmessage]"></textarea>
                                    <div class="clearfix"></div>
                                </div>
                            </div>

                            <div id="divCheckoutButton">
                                <button type="button" name="btnCheckout" id="btnCheckout" class="btn btn-lg btn-primary pull-right" onclick="javascript:submitCheckoutForm();">[checkout3_submitbutton]</button>
                                <a href="checkout2.asp?step=2p" class="btn btn-link"><i class="icon-left"></i> [checkout3_shippingmethodchange]</a>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</section>

<!--START: CATEGORY_FOOTER-->
<div class="category-footer" id="checkoutStep3Footer">
    <div class="container">[CONTENT]</div>
</div>
<!--END: CATEGORY_FOOTER-->

<!-- Creates the bootstrap modal where the image will appear -->
<div class="modal fade" id="cvv_modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="myModalLabel">Locate my CVV number</h4>
            </div>
            <div class="modal-body text-center">
                <img id="imageresource" src="assets/templates/common/images/cvv2.gif">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<form action="recalculate.asp" method="post" name="recalculate" id="recalculate">
    <input type="hidden" name="coupon_code" id="coupon_code" size="14" />
</form>

<!-- Modal -->
<input type="hidden" name="hdnAddrressValidatorResult" id="hdnAddrressValidatorResult" value="" />
<div id="divAddrressValidator" class="modal fade" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div id="AddressValidatorBlock">
                <!--START: AddressValidatorBlock-->
                <div class="modal-body">
                    <!--START: AddressValidatorBlock_ValidationFailed-->
                    <div>[result_msg]</div>
                    <!--END: AddressValidatorBlock_ValidationFailed-->
                    <!--START: AddressValidatorBlock_ValidationSuggestion-->
                    <div>[result_msg]
                        <!--START: AddressValidatorBlock_ValidationSuggestion_SingleAddressBlock-->
                        <br />
                        <br />
                        <strong>[checkout1_AddressValidator_SuggestedAddress]</strong> <a style="text-decoration:underline;" href="#" onclick="javascript:selectAddress('[AddrressValidator_address1]', '[AddrressValidator_address2]', '[AddrressValidator_city]', '[AddrressValidator_state]', '[AddrressValidator_zip]', '[AddrressValidator_addresstype]', '[AddrressValidator_rdi]');">[AddrressValidator_address], [AddrressValidator_city], [AddrressValidator_state], [AddrressValidator_zip]</a>
                        <!--END: AddressValidatorBlock_ValidationSuggestion_SingleAddressBlock-->
                    </div>
                    <!--END: AddressValidatorBlock_ValidationSuggestion-->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal" onclick="javascript:closeAddressValidatorModal();">[checkout1_AddressValidator_Close]</button>
                    <!--START: AddressValidatorBlock_ValidationSuggestion_ContinueWithEnteredAddress-->
                    <button type="button" class="btn btn-primary" onclick="useAddressValidator='';submitCheckoutForm();">[checkout1_AddressValidator_Continue]</button>
                    <!--END: AddressValidatorBlock_ValidationSuggestion_ContinueWithEnteredAddress-->
                </div>
                <!--END: AddressValidatorBlock-->
            </div>
        </div>
    </div>
</div>


<!--START: ELAYAWAYGATEWAYSCRIPTS-->
<script type="text/javascript" src="https://app2.elayaway.com/javascripts/prototype.js"></script>
<script type="text/javascript" src="https://app2.elayaway.com/javascripts/elayaway.js"></script>
<script>
    function eLayAwayPost()
    {
	    //Hide the calculator
	    var myDivCalculator = document.getElementById("elayaway_configurator0");
	    myDivCalculator.style.display = 'none';

	    //Write the selected payment configuration
	    var myDivElayaway = document.getElementById("divElayawayInfo");
	    var intMonths = 0;
	    intMonths = eval(parseInt(document.eci_form.months.value)+1);
	    var myString = "Selected term: " + intMonths + " months";
	    myDivElayaway.innerHTML = myString;

	    document.eci_form.elayawayconfigured.value = "1";

	    document.billing.elayawayMonths.value=document.eci_form.months.value;
	    document.billing.elayawayPaymentFrequency.value=document.eci_form.payment_frequency.value;
    }
</script>
<form name="eci_form" id="eci_form" method="POST" action="javascript:eLayAwayPost();">
    <input type="hidden" value="0" name="elayawayconfigured" id="elayawayconfigured" />
    <input type="hidden" value="" name="months" id="months" />
    <input type="hidden" value="" name="payment_frequency" id="payment_frequency" />
</form>
<!--END: ELAYAWAYGATEWAYSCRIPTS-->
<!--START: paypaladvance-->
<form method="post" action="https://payflowlink.paypal.com" name="frmPayPalAdv" id="frmPayPalAdv" target="iframePayPalAdv">
    <input type="hidden" name="SECURETOKEN" value="">
    <input type="hidden" name="SECURETOKENID" value="">
</form>
<script type="text/javascript">
    function openPayPalAdv(strToken, strTokenId) {
        var elt = document.getElementById("divPayPalAdv");

        //document.getElementById("iframePayPalAdv").src = "https://payflowlink.paypal.com/?SECURETOKEN=" + strToken + "&SECURETOKENID=" + strTokenId;
        document.getElementById("frmPayPalAdv").SECURETOKEN.value = strToken;
        document.getElementById("frmPayPalAdv").SECURETOKENID.value = strTokenId;
        document.getElementById("frmPayPalAdv").submit();

        elt.style.display = 'block';
    }
    function doCheckout(objForm, extraParams) {
        setValidation();
    	if (document.billing.onsubmit()) {
    		try {
    			if (jQuery("#hdnFuturePayID").length > 0 && jQuery("#hdnFuturePayID").val() == jQuery('input[name=payment]:checked', '#' + objForm.name).val()) {
    				var params = 'ajax=1';
    				if (extraParams != null && extraParams != "undefined") {
    					arrParams = extraParams.split("|||");
    					if (arrParams[0] == 'fptransaction_id') {
    						params = params + "&futurepay_callback=1&futurepay_transactionid=" + arrParams[1];
    					}
    				}
    				add_overlay("checkoutStep3", 1);
    				var url = 'checkout4.asp?step=4';
    				var formArray = getValuesAsArray(objForm);
    				for (var prop in formArray) {
    					var value = formArray[prop];
    					value = encodeURIComponent(value);
    					params = params + '&' + prop + '=' + value;
    				}

    				jQuery.ajax({
    					url: url,
    					dataType: 'json',
    					type: 'POST',
    					data: params,
    					cache: false,
    					success: function (objJsonResult) {
    						try {
    							if (!objJsonResult.fp_error) {
    								if (objJsonResult.fp_response != "")
    									jQuery("#futurepay_result").html(objJsonResult.fp_response);
    								else if (objJsonResult.fp_redirect != "")
    									window.location.href = objJsonResult.fp_redirect;
    							}
    							else {
    								alert(objJsonResult.fp_response);
    							}
    						}
    						catch (e) { alert("There was a problem processing your order. No charges have been applied to your FuturePay tab. Please contact FuturePay at support@futurepay.com to address this problem."); }
    					},
    					complete: checkoutSuccess,
    					error: reportError
    				});
    			}
    			else {
    			    if(jQuery('#iframePayPalAdv').size()>0) document.billing.target = "iframePayPalAdv";
    				document.billing.submit();
    			}
    		}
			catch (e) { }
        }
        return;
    }

    function FuturePayResponseHandler(response) {
    	if (response.error) {
    		//  Display some message informing your customer that the purchase was not completed
    		error_code = response.code;
    		error_reason = response.message;
    		alert(response.message); //FuturepayMessage
    	} else {
    		//  If the response is a Success Pass the returned TransactionID to the Merchant-Order-verification API from the server
    		transaction_id = response.transaction_id;
    		fp_params = "fptransaction_id|||" + transaction_id;
    		doCheckout(document.billing, fp_params);
    	}
    }

    function checkoutSuccess() {
    	isSubmitComplete = false;
    	remove_overlay("checkoutStep3");
    	return;
    }

    function getElementById_s(id) {
    	var obj = null;
    	if (document.getElementById) {
    		/* Prefer the widely supported W3C DOM method, if
			available:-
			*/
    		obj = get_Element(id);
    	} else if (document.all) {
    		/* Branch to use document.all on document.all only
			browsers. Requires that IDs are unique to the page
			and do not coincide with NAME attributes on other
			elements:-
			*/
    		obj = document.all[id];
    	}
    	/* If no appropriate element retrieval mechanism exists on
		this browser this function always returns null:-
		*/
    	return obj;
    }

    function reportError(jqXHR, textStatus) {
    	remove_overlay("checkoutStep3");

    	if (get_Element('sameAsBilling') != 'undefined' && get_Element('sameAsBilling') != null)
    		if (!document.billing.sameAsBilling.checked)
    			remove_overlay("shipping_info");
    	if (jqXHR.status > 0) {
    		alert("Error processing request " + jqXHR.status + " - " + jqXHR);
    		//alert(jqXHR.responseText);
    	}
    }

    function remove_overlay(panel) {
    	var elem = document.getElementById('overlay_' + panel);
    	if (elem)
    		elem.parentNode.removeChild(elem);
    	return false;
    }

    function add_overlay(panel, loading) {
    	var elem = document.getElementById('overlay_' + panel);
    	if (elem)
    		return false;

    	var objBody = getElementById_s(panel);
    	var objOverlay = document.createElement("div");

    	objOverlay.setAttribute('id', 'overlay_' + panel);
    	objOverlay.className = 'overlay';
    	objOverlay.style.position = 'absolute';
    	objOverlay.style.textAlign = 'center';
    	objOverlay.style.width = objBody.clientWidth + "px";
    	objOverlay.style.height = objBody.clientHeight + "px";
    	//alert(objOverlay.style.height);
    	objBody.insertBefore(objOverlay, objBody.firstChild);
    	objOverlay.style.display = 'block';

    	if (loading == 1) {
    		get_Element('overlay_' + panel).innerHTML = '<table border=0 width=100% height=100%><tr><td style="text-align: center;"><img src="assets/templates/common/images/loading.gif"></td></tr></table>';
    	}
    	else {
    		get_Element('overlay_' + panel).innerHTML = '<table border=0 width=100% height=100%><tr><td align="center"></td></tr></table>';
    	}
    	DisableEnableForm(document.billing, false);
    }

    function DisableEnableForm(xForm, xHow) {
    	objElems = xForm.elements;
    	for (i = 0; i < objElems.length; i++) {
    		objElems[i].disabled = xHow;
    	}
    }

    function checkoutSwitch(bolHide) {
        if (document.getElementById("spanCheckout")) {
            if (bolHide)
                document.getElementById("spanCheckout").style.display = 'none';
            else
                document.getElementById("spanCheckout").style.display = 'block';
        }
    }
</script>
<!--END: paypaladvance-->
<!--START: kount-->
<iframe width="1" height="1" frameborder="0" scrolling="no" src="/logo_k.htm?m=[kount_merchantid]&s=[kount_sessionid]">
    <img width=1 height=1 src="/logo_k.gif?m=[kount_merchantid]&s=[kount_sessionid]">
</iframe>
<!--END: kount-->

<!--START: template_styles-->
<link rel="stylesheet" href="/assets/templates/common-core/css/checkout_multi.css" type="text/css" media="screen" />
<!--END: template_styles-->

<!--START: template_scripts-->
<script type="text/javascript" src="assets/templates/common-html5/js/utilities.js"></script>

<script type="text/javascript">

    jQuery(function () {
		jQuery('#ship_info_same, #ship_info_dif').click(function () {
			if (jQuery(this).val() != '2') {
				jQuery('#sameAsShippingCheck').prop('checked', true);
				jQuery('#billingAddress-form-fieldset').slideUp(0);
				copy_ship_info();
			}
			else {
				jQuery('#sameAsShippingCheck').prop('checked', false);
				jQuery('.has-labelholder').each(function(i, element) {
					if(jQuery(element).find('select').length < 1) {
						jQuery(element).removeClass('floating');
					}
				});
				jQuery('#billingAddress-form-fieldset').slideDown(0);
				copy_ship_info();
			}
		});

		if (jQuery('#sameAsShippingCheck').prop('checked')) {
			jQuery('#ship_info_same').attr('checked', true);
			jQuery('#billingAddress-form-fieldset').slideUp(0);

			document.billing.billing_firstname.value = "[shipping_firstname]";
			document.billing.billing_lastname.value = "[shipping_lastname]";
			document.billing.billing_company.value = "[shipping_company]";
			document.billing.billing_address.value = "[shipping_address]";
			document.billing.billing_address2.value = "[shipping_address2]";
			document.billing.billing_city.value = "[shipping_city]";
			document.billing.billing_phone.value = "[shipping_phone]";
			country_object = "document.billing.billing_country";
			state_object = "document.billing.billing_state";
			document.billing.billing_state.value = "[shipping_state]";
			document.billing.billing_zip.value = "[shipping_zip]";
			select_field(country_object, "[shipping_country]");
		}
		else {
			jQuery('#ship_info_dif').attr('checked', true);
			jQuery('#billingAddress-form-fieldset').slideDown(0);
		}
	});

	function copy_ship_info() {
		if (!(document.billing.check1.checked)) {
			document.billing.billing_firstname.value="";
			document.billing.billing_lastname.value="";
			document.billing.billing_company.value="";
			document.billing.billing_address.value="";
			document.billing.billing_address2.value="";
			document.billing.billing_city.value="";
			document.billing.billing_phone.value="";
			document.billing.billing_zip.value="";
		}
		else {
			document.billing.billing_firstname.value="[shipping_firstname]";
			document.billing.billing_lastname.value="[shipping_lastname]";
			document.billing.billing_company.value="[shipping_company]";
			document.billing.billing_address.value="[shipping_address]";
			document.billing.billing_address2.value="[shipping_address2]";
			document.billing.billing_city.value="[shipping_city]";
			document.billing.billing_phone.value="[shipping_phone]";
		
			country_object="document.billing.billing_country";
			state_object="document.billing.billing_state";
		
			document.billing.billing_state.value="[shipping_state]";
		
			document.billing.billing_zip.value="[shipping_zip]";
			select_field(country_object,"[shipping_country]");
			document.billing.action="checkout3.asp?step=3&action=updatecountry&billing_state=[shipping_state]";
			document.billing.submit();
		}
	}

	var giftDiscountDetails = "";
	function showGiftCertDetails() {
	    get_Element('divGiftCertDetails').style.display = giftDiscountDetails;
	    if (giftDiscountDetails == "")
	        giftDiscountDetails = "none";
	    else
	        giftDiscountDetails = "";
	}
</script>

<script language="javascript" type="text/javascript">
    var useAddressValidator = "[useAddressValidator]";
    var ccNumerNotAllowedMessage = "[ccNumerNotAllowedMessage]";

    //You should create the validator only after the definition of the HTML form
    var frmvalidator = new Validator("billing");
    frmvalidator.EnableMsgsTogether();

    function setValidation() {
        frmvalidator.clearAllValidations();

        frmvalidator.setAddnlValidationFunction("submitForm");

        frmvalidator.addValidation("billing_firstname", "req", "Please enter your First Name");
        frmvalidator.addValidation("billing_firstname", "maxlen=20", "Max length for First Name is 20");

        frmvalidator.addValidation("billing_lastname", "req", "Please enter your Last Name");
        frmvalidator.addValidation("billing_lastname", "maxlen=20", "Max length for Last Name is 20");

        frmvalidator.addValidation("shipping_company2", "maxlen=50", "Max length for Company is 50");

        //<!--START: phonerequiredscript-->
        frmvalidator.addValidation("billing_phone", "maxlen=50", "Max length for Phone is 50");
        if (get_Element('billing_country') != 'undefined' && get_Element('billing_country') != null)
            if (get_Element('billing_country').value == "US")
                frmvalidator.addValidation("billing_phone", "phone", "Invalid phone number.");
        frmvalidator.addValidation("billing_phone", "req", "Please enter your phone")
        //<!--END: phonerequiredscript-->

        frmvalidator.addValidation("billing_address", "maxlen=50", "Max length for Address is 50");
        frmvalidator.addValidation("billing_address", "req", "Please enter your address");

        frmvalidator.addValidation("billing_address2", "maxlen=40", "Max length for Suite/Apt# is 40");

        frmvalidator.addValidation("billing_city", "maxlen=50", "Max length for City is 50");
        frmvalidator.addValidation("billing_city", "req", "Please enter your city");

        if (get_Element('billing_country').value == "US") {
            frmvalidator.addValidation("billing_state", "maxlen=50", "Max length for State is 50");
            frmvalidator.addValidation("billing_state", "req", "Please enter/select your state");
        }

        frmvalidator.addValidation("billing_zip", "maxlen=15", "Max length for Zip is 15");
        frmvalidator.addValidation("billing_zip", "req", "Please enter your zip code");

        frmvalidator.addValidation("billing_country", "dontselect=0");

        frmvalidator.addValidation("payment", "req", "Please select a payment option.");


        frmvalidator.setAddnlValidationFunction("checkotherreqfields");
    }

    function getSelectedPaymentId(objForm) {
    	if (jQuery('input[name=payment]:checked', '#' + objForm.name).length <= 0)
    		return;
    	var pmntVal = jQuery('input[name=payment]:checked', '#' + objForm.name).val();
    	if (pmntVal.indexOf("-") < 0)
    		return;
    	pmntVal = pmntVal.substring(pmntVal.indexOf("-") + 1);
    	if (isNaN(pmntVal))
    		return;
    	return parseInt(pmntVal);
    }

    function submitCheckoutForm(extraParams) {
        var myCountry = "US";
        var bolWorldPaySelected = false;
    	if (getElementById_s("billing_country"))
    		myCountry = getElementById_s("billing_country").value;

    	var textNamesForCCcheck = [textNamesForCCcheck];
    	var quit = false;
    	if (textNamesForCCcheck.length > 0) {
    		jQuery.each(textNamesForCCcheck, function (i, val) {
    			if (ExistsCreditCard(jQuery('[name="' + val + '"]').val())) {
    				alert("[ccNumerNotAllowedMessage]");
    				quit = true;
    				return;
    			}
    		});
    	}
    	if (ExistsCreditCard(jQuery('[name="ocomment"]').val())) {
    		alert("[ccNumerNotAllowedMessage]");
    		quit = true;
    	}
    	if (quit) return;

    	document.body.style.cursor = 'wait';
    	if (getElementById_s("btnCheckout")) getElementById_s("btnCheckout").style.cursor = 'wait';
    	objForm = document.billing;

    	setValidation();
        if (objForm.onsubmit()) //triggers the form validation
        {
            [PAYFORTMERCHANTPAGE_SCRIPTS_MULTISTEP]

            //FATTMERCHANT
            ////////////////////////////////////////////////////////////////////////////////////
            if (jQuery("#hdnFattMerchantID").length > 0 && jQuery("#hdnFattMerchantID").val() == jQuery('input[name=payment]:checked', '#' + objForm.name).val()) {
                var arrFattMerchantID = jQuery("#hdnFattMerchantID").val().split('-');
                var FattMerchantID = arrFattMerchantID[1];
                var result = "";
                var err = "";

                isSubmitComplete = false;
                if (extraParams != "checkoutButton") {
                    var extraDetails =
                        {
                            firstname: jQuery("[name=billing_firstname]").val(),
                            lastname: jQuery("[name=billing_lastname]").val(),
                            month: jQuery("select[name=ff" + FattMerchantID + "_ocardexpiresmonth] option:selected").val(),
                            year: jQuery("select[name=ff" + FattMerchantID + "_ocardexpiresyear] option:selected").val(),
                            phone: jQuery("[name=billing_phone]").val(),
                            address_1: jQuery("[name=billing_address]").val(),
                            address_2: jQuery("[name=billing_address2]").val(),
                            address_city: jQuery("[name=billing_city]").val(),
                            address_state: jQuery("select[name=billing_state] option:selected").val(),
                            address_zip: jQuery("[name=billing_zip]").val(),
                            address_country: jQuery("select[name=billing_country]").val(),
                            url: "https://fattpay.com"
                        };

                    // call tokenize api
                    fattJs.tokenize(extraDetails)
                        .then(function(result){
                        if (result) {
                            jQuery('#hdnFattMerchantToken').val(result.id);
                            jQuery('#hdnFattMerchantCustomerToken').val(result.customer.id);
                            jQuery('#hdnFattMerchantError').val("");
                            jQuery('#ff' + FattMerchantID + '_ocardnolast4').val(result.card_last_four);
                            ProceedCheckOut(myCountry);
                            }
                        })
                        .catch(function(err){
                            jQuery('#hdnFattMerchantError').val(err.message);
                            ProceedCheckOut(myCountry);
                        });
                        
                    return;        
                }
            }

    	    //BrainTree-V.Zero
    	    //////////////////////////////////////////////////////////////////////////////////
    	    if (jQuery("#hdnPayPalBraintreeID").length > 0 && jQuery("#hdnPayPalBraintreeID").val() == jQuery('input[name=payment]:checked', '#' + objForm.name).val()) {
    	        isSubmitComplete = false;
    	        if (extraParams != "PaypalBraintree") {
    	            //Trigger a soft submit on the form so that the braintree api can process the nonce
    	            var event = new Event('submit');
    	            objForm.dispatchEvent(event);
    	            isSubmitComplete = false;
    	            return;
    	        }
    	    }
    	    //////////////////////////////////////////////////////////////////////////////////
    		//////////////////////////////////////////////////////////////////////////////////
    		//SQUARE
    		////////////////////////////////////////////////////////////////////////////////////
    	    if (jQuery("#hdnSquareID").length > 0 && jQuery("#hdnSquareID").val() == jQuery('input[name=payment]:checked', '#' + objForm.name).val()) {
    	    	isSubmitComplete = false;
    	    	if (extraParams != 'Square') {
    	    		nsqPaymentForm.setPostalCode(jQuery('#billing_zip').val());
    	    		SquarerequestCardNonce();
    	    		return;
    	    	}
    	    }

    		if (jQuery("#hdnFuturePayID").length > 0 && jQuery("#hdnFuturePayID").val() == jQuery('input[name=payment]:checked', '#' + objForm.name).val()) {
    		    isSubmitComplete = false;
                if (typeof(FP) == "undefined")
				{
					alert("Error processing FuturePay transaction.");
					window.location.href = "/checkout3.asp?step=3";
					return;
				}
    		    FP.CartIntegration();
    		    FP.CartIntegration.placeOrder();
    		    document.body.style.cursor = '';
    		    if (getElementById_s("btnCheckout")) getElementById_s("btnCheckout").style.cursor = '';
    		    return;
    		}
    		else if (jQuery("#hdnWePayID").length > 0 && jQuery("#hdnWePayID").val() == jQuery('input[name=payment]:checked', '#' + objForm.name).val()) {
    		    WePay.set_endpoint(wepayEnvironment);

    			// Attach the event to the DOM
    			var response = WePay.credit_card.create({
    				"client_id": jQuery('#hdnWePayClientID').val(),
    				"user_name": jQuery('#billing_firstname').val() + ' ' + jQuery('#billing_lastname').val(),
    				"email": "[email]",
    				"cc_number": jQuery('#wepay_ocardno').val(),
    				"cvv": jQuery('#wepay_ocardcvv2').val(),
    				"expiration_month": jQuery('#wepay_ocardexpiresmonth').val(),
    				"expiration_year": jQuery('#wepay_ocardexpiresyear').val(),
    				"address": {
    					"zip": jQuery('#billing_zip').val()
    				}
    			}, function (data) {
    				if (data.error) {
    					isSubmitComplete = false;
    					document.body.style.cursor = '';
    					if (getElementById_s("btnCheckout")) getElementById_s("btnCheckout").style.cursor = '';
    					alert(jQuery('#hdnWePayGenericErrorMsg').val() + "\nWePay details: " + data.error_description);
    					return false;;
    				} else {
    				    CardLastFour = jQuery('#wepay_ocardno').val();
    				    CardLastFour = CardLastFour.trim();
    				    CardLastFour = CardLastFour.substr(CardLastFour.length - 4);
    				    hdnWePayRef = data.credit_card_id + '||||' + CardLastFour + '||||' + jQuery('#wepay_ocardexpiresmonth').val() + '||||' + jQuery('#wepay_ocardexpiresyear').val()
    				    jQuery('#hdnWePayRef').val(hdnWePayRef);
    					jQuery(".wepaydiv :input").attr("disabled", true);
    					ProceedCheckOut(myCountry);
    					//if there's wepay available, enable again the inputs.
    					jQuery(".wepaydiv :input").attr("disabled", false);
    					return;
    				}
    			});
    			return;
    		}

    		//Zippay ZipMoney
    		//////////////////////////////////////////////////////////////////////////////////
    		else if (jQuery("#hdnZippayID").length > 0 && jQuery("#hdnZippayID").val() == jQuery('input[name=payment]:checked', '#' + objForm.name).val()) {
    			var params = 'ajax=1';
    			var selectedGateway = '';

    			if (jQuery("#hdnZippayID").val() == jQuery('input[name=payment]:checked', '#' + objForm.name).val())
    				selectedGateway = "zippay";

    			add_overlay("checkoutStep3", 1);
    			var url = 'checkout4.asp?step=4';
    			var formArray = getValuesAsArray(objForm);
    			for (var prop in formArray) {
    				var value = formArray[prop];
    				value = encodeURIComponent(value);
    				params = params + '&' + prop + '=' + value;
    			}

    			jQuery.ajax({
    				url: url,
    				dataType: 'json',
    				type: 'POST',
    				data: params,
    				cache: false,
    				success: function (objJsonResult) {
    					try {
    						if (objJsonResult.zp_error == 0) {
    							if (objJsonResult.zp_response != "") {
    								zipMoney.checkout(objJsonResult.zp_response);
    								return;
    							}
    						}
    						else
    							alert(objJsonResult.zp_response);
    					}
    					catch (e) { alert("There was a problem processing your order. No charges have been applied to your ZipPay/ZipMoney account. Please contact ZipPay/ZipMoney at customercare@zipmoney.com.au to address this problem."); }
    				},
    				complete: checkoutSuccess,
    				error: reportError
    			});
    			return;

    		}
    		//PayFort
            //////////////////////////////////////////////////////////////////////////////////
            else if (jQuery("#hdnPayFortID").length > 0 && jQuery("#hdnPayFortID").val() == jQuery('input[name=payment]:checked', '#' + objForm.name).val()) {
                isSubmitComplete = false;
                if (extraParams != "PayFort") {
                    //CALL THE LIGHTBOX AND RETURN.  UPON COMPLETE EVENT OF LIGHTBOX, HIDDEN cc VARIABLES WILL BE SET AND THE CHECKOUT WILL BE CALLED AGAIN WITHOUT
                    //THE checkoutButton parameter for normal checkout
                    doPayFortClientToken();
                    isSubmitComplete = false;
                    return;
                }
            }
            //////////////////////////////////////////////////////////////////////////////////


            //Stripe New
            //////////////////////////////////////////////////////////////////////////////////
            if
            (
                jQuery("#hdnStripeNewJS_ID").length > 0
                &&
                (
                    jQuery("#hdnStripeNewJS_ID").val() == jQuery('input[name=payment]:checked', '#' + objForm.name).val()
                    ||
                    (
                        jQuery("#authCIMProfileID").val().indexOf('_pm|||') > 0
                        && jQuery('input[name=payment]:checked', '#' + objForm.name).val() == 'online-CIM'
                    )
                )
            )
            {
                isSubmitComplete = false;
                if (extraParams != "stripenew") {
                    doStripeCheckoutNew(objForm, 'checkoutButton', 'MS', '');
                    return;
                }
            
            }
            //////////////////////////////////////////////////////////////////////////////////

	        //Stripe JS
	        //////////////////////////////////////////////////////////////////////////////////
            if (jQuery("#hdnStripeJS_ID").length > 0 && jQuery("#hdnStripeJS_ID").val() == jQuery('input[name=payment]:checked', '#' + objForm.name).val()) {
                isSubmitComplete = false;
                if (extraParams != "stripe") {
                    stripe.createToken(card,
                        {
                              name: jQuery("#billing_firstname").val() + ' ' + jQuery("#billing_lastname").val()
                            , address_line1: jQuery("#billing_address").val() + ' ' + jQuery("#billing_address2").val()
                            , address_city: jQuery("#billing_city").val()
                            , address_state: jQuery("#billing_state").val()
                            , address_zip: jQuery("#billing_zip").val()
                            , address_country: jQuery("#billing_country").val()
                        }
                    ).then(function (result) {
                        if (result.error) {
                            //var errorElement = document.getElementById('card-errors');
                            //errorElement.textContent = result.error.message;
                            //alert(GetErrorMessage("error.asp?error=30"));
                            console.log(result.error.message);
                        } else {
                            document.forms.billing.hdnStripeJS_Token.value              = result.token.id;
                            jQuery('#ff' + jQuery("#hdnStripeJS_ID").val().split('-')[1] + '_ocardexpiresmonth').val(result.token.card.exp_month);
                            jQuery('#ff' + jQuery("#hdnStripeJS_ID").val().split('-')[1] + '_ocardexpiresyear').val(result.token.card.exp_year);
                            jQuery('#ff' + jQuery("#hdnStripeJS_ID").val().split('-')[1] + '_ocardtype').val(result.token.card.brand);
                            jQuery('#ff' + jQuery("#hdnStripeJS_ID").val().split('-')[1] + '_ocardnolast4').val(result.token.card.last4);
                        }
                        ProceedCheckOut(myCountry)
                       
                    });
			        return;
		        }
            }
            //////////////////////////////////////////////////////////////////////////////////

            //WorldPayGateway
            //////////////////////////////////////////////////////////////////////////////////
            else if (jQuery("#hdnWorldPayID").length > 0 && jQuery("#hdnWorldPayID").val() == jQuery('input[name=payment]:checked', '#' + objForm.name).val()) {
                bolWorldPaySelected = true;
                var bolIsSaveCCChecked = false;
                var arrWorldPayID = jQuery("#hdnWorldPayID").val().split('-');
                var worldPayID = arrWorldPayID[1];
                var strWorldPayPublicKey = jQuery("#hdnWorldPayPublicKey").val();
                var jsonObject;

                if (jQuery("input[name=ff" + worldPayID + "_savecc]").is(':checked')) {
                    bolIsSaveCCChecked = true;
                }

                var strCardNumber = jQuery("input[name=ff" + worldPayID + "_ocardno]").val();
                var strCVV = jQuery("input[name=ff" + worldPayID + "_ocardcvv2]").val();
                var strExpirationMonth = jQuery("select[name=ff" + worldPayID + "_ocardexpiresmonth] option:selected").val();
                var strExpirationYear = jQuery("select[name=ff" + worldPayID + "_ocardexpiresyear] option:selected").val();
                var strExpirationDate = strExpirationMonth + "/" + strExpirationYear;
                var strFirstName = jQuery('#billing_firstname').val();
                var strLastName = jQuery('#billing_lastname').val();
                var strAddress = jQuery("#billing_address").val();
                var strCity = jQuery("#billing_city").val();
                var strState = jQuery("select[name=billing_state] option:selected").val();
                var strCountry = jQuery("select[name=billing_country] option:selected").val();
                var strZipCode = jQuery('#billing_zip').val();

                var strZipCode = jQuery('#billing_zip').val();

                var strCustomerInfo = "-1";
                var arrCustomerInfo;

                if (bolIsSaveCCChecked) {
                    jQuery.ajax({
                        url: 'checkout_one.asp',
                        dataType: 'html',
                        type: 'POST',
                        cache: false,
                        data: {
                            action: 'getworldpaycustomerid',
                            cardlastdigits: right(strCardNumber, 4),
                            cardexpirationyear: strExpirationYear,
                            cardexpirationmonth: strExpirationMonth
                        }
                    }).success(function (data) {

                        strCustomerInfo = data.toString();
                        jsonObject = createWorldPayJSONObject(bolIsSaveCCChecked, strCustomerInfo, strWorldPayPublicKey, strCardNumber, strCVV, strExpirationDate, strFirstName, strLastName, strAddress, strCity, strState, strZipCode, strCountry)

                        if (typeof jsonObject != 'undefined') {

                            var response = tokenizeCard(jsonObject
                            ).done(function (result) {
                                var responseObj = jQuery.parseJSON(JSON.stringify(result));

                                if (responseObj.success) {
                                    jQuery('#hdnWorldPayToken').val(responseObj.token);
                                    jQuery('#hdnWorldPayCustomerID').val(responseObj.customerId);
                                    ProceedCheckOut(myCountry);
                                    return;
                                }
                                else {
                                    alert("[worldpayerror201]");
                                    return;
                                }
                            }
                            ).fail(function () {
                                alert("[worldpayerror201]");
                                return;
                            });
                        }

                        else {
                            ProceedCheckOut(myCountry);
                            return;
                        }


                    }).error(function () {
                        alert("[worldpayerror201]");
                        return;
                    });
                }
                else {
                    jsonObject = createWorldPayJSONObject(bolIsSaveCCChecked, strCustomerInfo, strWorldPayPublicKey, strCardNumber, strCVV, strExpirationDate, strFirstName, strLastName, strAddress, strCity, strState, strZipCode, strCountry)

                    var response = tokenizeCard(jsonObject).done(function (result) {
                        var responseObj = jQuery.parseJSON(JSON.stringify(result));

                        if (responseObj.success) {

                            jQuery('#hdnWorldPayToken').val(responseObj.token);
                            ProceedCheckOut(myCountry);
                            return;
                        }
                        else {
                            alert("[worldpayerror201]");
                            return;
                        }
                    }
                    ).fail(function () {
                        alert("[worldpayerror201]");
                        return;

                    });


                }
            }else if(jQuery("#hdnAuthNetID").length > 0 && jQuery("#hdnAuthNetID").val() == jQuery('input[name=payment]:checked', '#' + objForm.name).val()){
            	//////////////////////////////////////////////////////////////////////////////////
            	//AUTHORIZE.NET Accept.js
            	////////////////////////////////////////////////////////////////////////////////////
            	isSubmitComplete = false;
            	if (extraParams != 'AuthorizeNet') {
            		sendPaymentDataToAnet();
            		return;
            	}
    	    }

    		var intPmntId = getSelectedPaymentId(objForm);
    		if (jQuery("#hdnff" + intPmntId + "_ocardnotoken").length > 0 && jQuery("#hdnff" + intPmntId + "_ocardnolast4").length > 0) {
    		    if (jQuery("#hdnff" + intPmntId + "_ocardnotoken").val().length == 0 && jQuery("[name=ff" + intPmntId + "_ocardno]").val().length >= 15)
    		    {
    		        isSubmitComplete = false;
    		        obj3dCCFIelds.processEncryption(intPmntId);
    		        return;
    		    }
    		}

    		if (!bolWorldPaySelected)
        		ProceedCheckOut(myCountry);
    	}
    	else {
    		document.body.style.cursor = '';
    		if (getElementById_s("btnCheckout")) getElementById_s("btnCheckout").style.cursor = '';
    	}
    }

    function ProceedCheckOut(myCountry) {
        var bolBraintreeSelected = (jQuery("#hdnPayPalBraintreeID").length > 0 && jQuery("#hdnPayPalBraintreeID").val() == jQuery('input[name=payment]:checked', '#' + objForm.name).val())
        if (useAddressValidator == "1" && myCountry == "US" && !bolBraintreeSelected) {
            var StrResult2 = "";
    		isSubmitComplete = false;
    		getElementById_s("hdnAddrressValidatorResult").value = "";
    		var url = 'addressvalidator.asp?no-cache=' + Math.random();
    		var params = 'doaction=verify&ct=multi';
    		params += '&name=' + encodeURIComponent(getElementById_s("billing_firstname").value + ' ' + getElementById_s("billing_lastname").value);
    		if (getElementById_s("billing_company")) params += '&company=' + encodeURIComponent(getElementById_s("billing_company").value);
    		params += '&address=' + encodeURIComponent(getElementById_s("billing_address").value);
    		params += '&address2=' + encodeURIComponent(getElementById_s("billing_address2").value);
    		params += '&city=' + encodeURIComponent(getElementById_s("billing_city").value);
    		params += '&state=' + encodeURIComponent(getElementById_s("billing_state").value);
    		params += '&zip=' + encodeURIComponent(getElementById_s("billing_zip").value);

    		jQuery.ajax({
    		    url: url,
    		    dataType: 'html',
    		    type: 'POST',
    		    data: params,
    		    cache: false,
    		    success: function (StrResult2) {
    		    	jQuery("#AddressValidatorBlock").html(StrResult2);
    		    },
    		    error: reportError
    		});

    	}
    	else {
    		document.body.style.cursor = '';
    		if (getElementById_s("btnCheckout")) getElementById_s("btnCheckout").style.cursor = '';
    		if (getElementById_s("AddressValidatorBlock") != null && getElementById_s("AddressValidatorBlock") != 'undefined')
    			getElementById_s("AddressValidatorBlock").style.display = 'none';

    		objForm.submit();
    	}
    }

    function submitCheckoutFormPos() {
        objForm = document.billing;
        if (getElementById_s("hdnAddrressValidatorResult").value == "1") {
            objForm.submit();
            return;
        }
        else {
            isSubmitComplete = false;

            jQuery('#divAddrressValidator').modal('show');
            document.body.style.cursor = '';
            if (getElementById_s("btnCheckout")) getElementById_s("btnCheckout").style.cursor = '';
        }

    }

    function selectAddress(AddrressValidator_address1, AddrressValidator_address2, AddrressValidator_city, AddrressValidator_state, AddrressValidator_zip) {
        getElementById_s("billing_address").value = AddrressValidator_address1;
        getElementById_s("billing_address2").value = AddrressValidator_address2;
        getElementById_s("billing_city").value = AddrressValidator_city;
        getElementById_s("billing_zip").value = AddrressValidator_zip;
        getElementById_s("billing_state").value = AddrressValidator_state;
        useAddressValidator = '';
        submitCheckoutForm();
    }

    function reportError(request) {
        isSubmitComplete = false;
        //request.responseText
        alert("Error processing request " + request.responseText);
    }

    function getElementById_s(id) {
        var obj = null;
        if (document.getElementById) {
            /* Prefer the widely supported W3C DOM method, if
            available:-
            */
            obj = get_Element(id);
        } else if (document.all) {
            /* Branch to use document.all on document.all only
            browsers. Requires that IDs are unique to the page
            and do not coincide with NAME attributes on other
            elements:-
            */
            obj = document.all[id];
        }
        /* If no appropriate element retrieval mechanism exists on
        this browser this function always returns null:-
        */
        return obj;
    }


    function updateOrderComments(strValue) {
        //alert(strValue);
        var url = 'ship_ajax.asp?action=updateOrderComments&no-cache=' + Math.random();
        var params = 'comment=' + escape(strValue);

        jQuery.ajax({
            url: url,
            dataType: 'html',
            type: 'POST',
            data: params,
            cache: false
        });
    }

    function clearContent(obj) {
        obj.value = removeHTMLTags(obj.value);
    }

    function removeHTMLTags(strString) {
        var strInputCode = strString;

        strInputCode = strInputCode.replace(/&(lt|gt);/g, function (strMatch, p1) {
            return (p1 == "lt") ? "<" : ">";
        });
        var strTagStrippedText = strInputCode.replace(/<\/?[^>]+(>|$)/g, "");
        strTagStrippedText = strTagStrippedText.replace(/\u00a0/g, '');
        //strTagStrippedText = strTagStrippedText.replace(/&nbsp;/gi,'');
        return strTagStrippedText;
    }



</script>

<script type="text/javascript">
    jQuery(document).ready(function () {

    	var myRadio = jQuery('input[name=payment]:checked', '#billing');

    	if (myRadio.length > 0) {
    		var methodidd = myRadio.attr("id").split("line-").pop();

    		if (methodidd != null) {
    			$('div[name="divPaymentOption"]').slideUp();
    			$('#divPaymentOption' + methodidd).show();
    		}
    	}
    });

    jQuery(function () {

        var methodid;

        $("input[id^='online-'], input[id^='offline-']").change(function () {
            if ($(this).is(':checked')) {
                methodid = $(this).attr("id").split("line-").pop();
                //console.log('id is ' + methodid);
                $('div[name="divPaymentOption"]').slideUp();
                $('#divPaymentOption' + methodid).slideDown();
            }
        });


    });

    function ApplyCoupon() {
        var code = $('#coupon_code2').val();
        var form2 = $('#recalculate');

        $('#coupon_code').val(code);

        form2.submit();
    }
</script>

<script type="text/javascript">

    jQuery(document).ready(function () {
        jQuery('.state-select select, .state-select input, .chk-questions-section select').addClass("form-control");

        $('.cart_text ').each(function () {
//            $(this).html($(this).html().replace('[SHIPPING]', '<span class="dash">---</span>'));
//            $(this).html($(this).html().replace('[TAX]', '<span class="dash">---</span>'));
//            $(this).html($(this).html().replace('[BALANCE]', '<span class="dash">---</span>'));
        });
    });

    jQuery(window).on("load", function () {
    	if (window.innerWidth > 767) {
    		jQuery('#ab-content').css('min-height', document.getElementById("checkout-right").scrollHeight + 30);
    	}
    });
</script>
<script type="text/javascript" src="assets/templates/common-core/js/checkout.js"></script>

<!--START: stripe_applepay_button_js-->
[stripeApplePay_js]
<!--END: stripe_applepay_button_js-->

<!--START: Google_Pay_JS-->
[GooglePay_JS]
<!--END: Google_Pay_JS-->

<!--START: Amazon_Pay_JS-->
[AmazonPay_JS]              
<!--END: Amazon_Pay_JS-->

<!--START: delivery_calendar-->
<link href="assets/templates/common-html5/css/jquery-ui.min.css" rel="stylesheet" />
<script type="text/javascript" src="assets/templates/common-html5/js/jquery-ui.min.js"></script>
<script>

    Date.prototype.yyyymmdd = function () {
        var yyyy = this.getFullYear().toString();
        var mm = (this.getMonth() + 1).toString(); // getMonth() is zero-based
        var dd = this.getDate().toString();
        return yyyy + "-" + (mm[1] ? mm : "0" + mm[0]) + "-" + (dd[1] ? dd : "0" + dd[0]); // padding
    };

    var maxDays = [maxDays];
    var productionDays = [productionDays];
    var disabledDates = "[disabledDates]";

    var array = disabledDates.split(",");

    if (productionDays != "0") {
        var today = new Date();
        today = new Date(today.getTime() + today.getTimezoneOffset() * 60000);
        array.push(today.yyyymmdd());
    }

    for (i = 0; i < productionDays; i++) {
        var blockDate = new Date();
        blockDate = new Date(blockDate.getTime() + blockDate.getTimezoneOffset() * 60000);
        blockDate.setDate(blockDate.getDate());

        array.push(blockDate.yyyymmdd());
    }

    jQuery('input.calendar-format').datepicker({
        beforeShowDay: function (date) {
            var string = jQuery.datepicker.formatDate('yy-mm-dd', date);
            return [array.indexOf(string) == -1]
        },
        minDate: 0,
        maxDate: "+[maxDays]D"
    });
</script>
<!--END: delivery_calendar-->
<script>
    jQuery('.cart-balance-item').text(jQuery('#orderBalance').text());
</script> 

<link rel="stylesheet" href="/assets/templates/common-core/lib/labelholder/labelholder.min.css" type="text/css" media="screen" />
<script type="text/javascript" src="/assets/templates/common-core/lib/labelholder/labelholder.min.js"></script>
<script>
	$(function() {
		 $('.labelholder').labelholder();
	});
</script>

<!--START: GOOGLE_AUTOFILL-->
<script>
    var placeSearch, autocomplete;
    var componentForm = {
		street_number: 'short_name',
		route: 'long_name',
		locality: 'long_name',
		administrative_area_level_1: 'short_name',
		country: 'long_name',
		postal_code: 'short_name'
    };

    function initAutocomplete() {
		autocomplete = new google.maps.places.Autocomplete(
			(document.getElementById('billing_address')),
			{types: ['geocode']});
		autocomplete.addListener('place_changed', fillInAddressBilling);
    }

    function fillInAddressBilling() {
		// Get the place details from the autocomplete object.
		var place = autocomplete.getPlace();

		var address, address2, city, country, state, zip = '';;

		for (var i = 0; i < place.address_components.length; i++) {
			var addressType = place.address_components[i].types[0];

			if(addressType == 'street_number') address = place.address_components[i].long_name;
			if(addressType == 'route') address2 = place.address_components[i].short_name;
			if(addressType == 'locality') city = place.address_components[i].long_name;
			if(addressType == 'country') country = place.address_components[i].short_name;
			if(addressType == 'administrative_area_level_1') state = place.address_components[i].short_name;
			if(addressType == 'postal_code') zip = place.address_components[i].long_name;
		}

		var addressItems = place.address_components;

		if(address && address2) jQuery('#billing_address').val(address + ' ' + address2);
		else if (address == 'undefined') jQuery('#billing_address').val(address + ' ' + address2);
		else jQuery('#billing_address').val(address2);
		jQuery('#billing_city').val(city);
		jQuery('#billing_country').val(country);
		jQuery('#billing_state').val(state);
		jQuery('#billing_zip').val(zip);
    } 

    // Bias the autocomplete object to the user's geographical location,
    // as supplied by the browser's 'navigator.geolocation' object.
    function geolocate() {
		if (navigator.geolocation) {
			navigator.geolocation.getCurrentPosition(function(position) {
			var geolocation = {
				lat: position.coords.latitude,
				lng: position.coords.longitude
			};
			var circle = new google.maps.Circle({
				center: geolocation,
				radius: position.coords.accuracy
			});
			autocomplete.setBounds(circle.getBounds());
			});
		}
    }
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=[googleaddress_api]&libraries=places&callback=initAutocomplete" async defer></script>
<!--END: GOOGLE_AUTOFILL-->

<!--END: template_scripts-->


<style>

	.logo img {
		margin: 0; 
		
	}
	
	#checkout-logo {
		padding: 0; 
	}
	
	.trust-embeds {
		display: flex; 
	}
	
	.trust-embeds img:first-of-type {
		width: 99%; 
	}


</style>
